import{a6 as W,j as e,g as j,O as r,aV as _,aW as f,aX as v,B as I,aY as g,aZ as T,a4 as q,aK as F,a_ as M,a7 as N,aE as X}from"./chakra-6oTi0Wmk.js";import{u as V,b as A}from"./react-BuIY-1St.js";import{I as K}from"./index-B_gHJ4Lp.js";import{g as R,a as P,az as U,aA as Y,aB as Z,al as m,T as G,P as J,m as E,o as $,b as l,S as Q,aC as ee,f as se,ag as ae,aD as oe}from"./index-CyduEWZJ.js";import{m as u}from"./misc-nodes-q0NNtPtC.js";import{s as B}from"./stations-BwJGRdt_.js";const d={justifyContent:"flex-start",p:0,w:"100%",h:10},b={p:2.5,h:10},w={p:0,display:"flex",flexDirection:"column"},te=e.jsx("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:e.jsx("rect",{x:"6",y:"6",width:"12",height:"12",rx:"2",stroke:"currentColor",strokeDasharray:"2",fill:"none"})}),D=.3,xe=()=>{const{t}=V(),a=R(),{mode:n,theme:x,paletteAppClip:{output:i}}=P(s=>s.runtime),{preference:{unlockSimplePathAttempts:p,toolsPanel:{expand:c}}}=P(s=>s.app),h=W("white","var(--chakra-colors-gray-800)"),[z,S]=A.useState(!1);A.useEffect(()=>{z&&i&&(a(U(i)),S(!1))},[i==null?void 0:i.toString()]);const[o,C]=A.useState(c),L=()=>{c?C(!1):setTimeout(()=>C(!0),(D+.02)*1e3),a(oe(!c))},y=s=>a(m("station-".concat(s))),H=s=>a(m("line-".concat(s))),k=s=>a(m("misc-node-".concat(s)));return e.jsxs(j,{flexShrink:"0",direction:"column",width:c?450:10,maxWidth:"100%",height:"100%",bg:h,zIndex:"5",transition:"width ".concat(D,"s ease-in-out"),children:[e.jsx(r,{"aria-label":"Menu",leftIcon:o?e.jsx(Y,{size:40,transform:"rotate(90)"}):e.jsx(Z,{size:40,transform:"rotate(90)"}),onClick:L,sx:d,children:o?t("panel.tools.showLess"):void 0}),e.jsx(j,{className:"tools",overflow:"auto",children:e.jsxs(_,{width:"100%",allowMultiple:!0,defaultIndex:[0,1,2],children:[e.jsx(r,{"aria-label":"select",leftIcon:te,onClick:()=>a(m(n==="select"?"free":"select")),variant:n==="select"?"solid":"outline",sx:d,children:o?t("panel.tools.select"):void 0}),e.jsxs(f,{children:[e.jsxs(v,{sx:b,children:[o&&e.jsx(I,{as:"span",flex:"1",textAlign:"left",children:t("panel.tools.section.lineDrawing")}),e.jsx(g,{})]}),e.jsxs(T,{sx:w,children:[e.jsxs(j,{children:[e.jsx(G,{theme:x,onClick:()=>{S(!0),a(J(x))}}),e.jsx(q,{fontWeight:"600",pl:"1",alignSelf:"center",children:o?t("color"):void 0})]}),Object.values(E).filter(s=>!(s===E.Simple&&p>=0)).map(s=>e.jsx(r,{"aria-label":s,leftIcon:$[s].icon,onClick:()=>H(s),variant:n==="line-".concat(s)?"solid":"outline",sx:d,children:o?t($[s].metadata.displayName):void 0},s)),e.jsx(r,{"aria-label":l.Virtual,leftIcon:u[l.Virtual].icon,onClick:()=>k(l.Virtual),variant:n==="misc-node-".concat(l.Virtual)?"solid":"outline",sx:d,children:o?t(u[l.Virtual].metadata.displayName):void 0})]})]}),e.jsxs(f,{children:[e.jsxs(v,{sx:b,children:[o&&e.jsx(I,{as:"span",flex:"1",textAlign:"left",children:t("panel.tools.section.stations")}),e.jsx(g,{})]}),e.jsxs(T,{sx:w,children:[Object.values(Q).map(s=>e.jsx(r,{"aria-label":s,leftIcon:B[s].icon,onClick:()=>y(s),variant:n==="station-".concat(s)?"solid":"outline",sx:d,children:o?t(B[s].metadata.displayName):void 0},s)),e.jsx(O,{type:"station",expand:o})]})]}),e.jsxs(f,{children:[e.jsxs(v,{sx:b,children:[o&&e.jsx(I,{as:"span",flex:"1",textAlign:"left",children:t("panel.tools.section.miscellaneousNodes")}),e.jsx(g,{})]}),e.jsxs(T,{sx:w,children:[Object.values(l).filter(s=>s!==l.Virtual&&s!==l.I18nText).map(s=>e.jsx(r,{"aria-label":s,leftIcon:u[s].icon,onClick:()=>k(s),variant:n==="misc-node-".concat(s)?"solid":"outline",sx:d,children:o?t(u[s].metadata.displayName):void 0},s)),e.jsx(O,{type:"misc-node",expand:o})]})]})]})})]})},O=t=>{const{type:a,expand:n}=t,{t:x}=V(),i=R(),p=a==="misc-node"?"nodes":a==="station"?"stations":"line-styles",c=a==="line"?"xs":void 0,h=a==="line"?"30px":"40px";return e.jsxs(F,{fontSize:c,children:[a!=="line"&&e.jsx(M.Provider,{value:{style:{padding:5},size:h},children:e.jsx(ee,{})}),n&&e.jsxs(e.Fragment,{children:[e.jsx(N,{color:"teal.500",href:"https://github.com/railmapgen/rmp/blob/main/docs/".concat(p,".md"),isExternal:!0,children:x("panel.tools.learnHowToAdd.".concat(a))}),e.jsx(X,{as:se,color:"teal.500",mr:"auto"}),e.jsx(N,{color:"teal.500",onClick:()=>i(ae(!0)),isExternal:!0,children:x("panel.tools.learnHowToAdd.donate")}),a!=="line"&&e.jsx(M.Provider,{value:{style:{padding:5},color:"red",size:h},children:e.jsx(K,{})})]})]})};export{O as LearnHowToAdd,xe as default};
