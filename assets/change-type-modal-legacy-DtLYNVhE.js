System.register(["./chakra-legacy-zPaewjzV.js","./index-legacy-BcSgnS1J.js","./react-legacy-CLSeZSow.js","./stations-legacy-Ba_-lFjP.js","./graph-legacy-DQezf9br.js"],(function(e,t){"use strict";var s,n,a,r,i,l,o,c,d,u,g,h,p,y,m,b,f,S,C,j,x,A,E,v,O,T,N,L,k,w,W,z,P,I,M,R,_,B,D,F;return{setters:[e=>{s=e.j,n=e.at,a=e.$,r=e.au,i=e.a1,l=e.a4,o=e.a2,c=e.a3,d=e.aV,u=e.aW,g=e.aX,h=e.B,p=e.aY,y=e.aZ,m=e.a5,b=e.O,f=e.aM},e=>{S=e.S,C=e.ay,j=e.ak,x=e.o,A=e.L,E=e.p,v=e.g,O=e.a,T=e.t,N=e.v,L=e.w,k=e.C,w=e.d,W=e.m,z=e.a5,P=e.R,I=e.T,M=e.P,R=e.k},e=>{_=e.u,B=e.b},e=>{D=e.s},e=>{F=e.c}],execute:function(){const t=[S.ShmetroBasic2020],X=e("b",((e,s,n)=>{const a=e.getNodeAttribute(s,"type"),r=structuredClone(e.getNodeAttribute(s,a).names);for(let t=0;t<Math.abs(D[n].defaultAttrs.names.length-r.length);t++)D[n].defaultAttrs.names.length>r.length?r.push("Stn"):r.pop();const i={...D[n].defaultAttrs,names:r};Object.values(t).includes(a)&&Object.values(t).includes(n)||(i.nameOffsetX=e.getNodeAttribute(s,a).nameOffsetX,i.nameOffsetY=e.getNodeAttribute(s,a).nameOffsetY),C.includes(n)&&C.includes(a)&&(i.color=structuredClone(e.getNodeAttribute(s,a).color)),e.removeNodeAttribute(s,a),e.mergeNodeAttributes(s,{type:n,[n]:i})})),Y=e("c",((e,t,s)=>{const n=e.getEdgeAttribute(t,"type"),a=e.getEdgeAttribute(t,"style");if(j[a].metadata.supportLinePathType.includes(s)){e.removeEdgeAttribute(t,n);const a=structuredClone(x[s].defaultAttrs);e.mergeEdgeAttributes(t,{type:s,[s]:a})}})),Z=e("a",((e,t,s,n)=>{const a=e.getEdgeAttribute(t,"type"),r=e.getEdgeAttribute(t,"style");if(j[s].metadata.supportLinePathType.includes(a)){const a=e.getEdgeAttribute(t,"zIndex"),i=e.getEdgeAttribute(t,r);e.removeEdgeAttribute(t,r);const l=structuredClone(j[s].defaultAttrs);A.includes(r)&&A.includes(s)?l.color=i.color:A.includes(s)&&n&&(l.color=n),e.mergeEdgeAttributes(t,{style:s,[s]:l}),s===E.River?e.setEdgeAttribute(t,"zIndex",-5):e.setEdgeAttribute(t,"zIndex",null!=a?a:0)}}));e("C",(e=>{const{isOpen:t,onClose:C,isSelect:U,filter:H}=e,{t:V}=_(),$=v(),{selected:q,theme:G,paletteAppClip:{output:J}}=O((e=>e.runtime)),{activeSubscriptions:K}=O((e=>e.account)),Q=B.useCallback((()=>{$(T()),$(N()),$(L(ee.current.export()))}),[$,T,N,L]),ee=B.useRef(window.graph),te={any:V("header.settings.procedures.changeType.any"),...Object.fromEntries(Object.entries(x).map((([e,t])=>[e,V(t.metadata.displayName).toString()])))},se={any:V("header.settings.procedures.changeType.any"),...Object.fromEntries(Object.entries(j).map((([e,t])=>[e,V(t.metadata.displayName).toString()])))},ne={any:V("header.settings.procedures.changeType.any"),...Object.fromEntries(Object.entries(D).map((([e,t])=>[e,V(t.metadata.displayName).toString()])))},ae={id:"any",theme:[k.Other,"other","#ffffff",w.black],value:V("header.settings.procedures.changeType.any")},[re,ie]=B.useState(!1),[le,oe]=B.useState(0),[ce,de]=B.useState(!1),[ue,ge]=B.useState("any"),[he,pe]=B.useState(S.ShmetroBasic),[ye,me]=B.useState(!1),[be,fe]=B.useState("any"),[Se,Ce]=B.useState(E.SingleColor),[je,xe]=B.useState(!1),[Ae,Ee]=B.useState("any"),[ve,Oe]=B.useState(W.Diagonal),[Te,Ne]=B.useState(!1),[Le,ke]=B.useState(ae),[we,We]=B.useState(G),[ze,Pe]=B.useState(!1);B.useEffect((()=>{ze&&J&&(We(J),Pe(!1))}),[null==J?void 0:J.toString()]);const[Ie,Me]=B.useState([]),Re=[{id:"changeZIndex",title:V("header.settings.procedures.changeZIndex"),onClose:()=>ie(!re),field:[{type:"select",label:V("panel.details.info.zIndex"),value:le,options:Object.fromEntries(Array.from({length:11},((e,t)=>[t-5,(t-5).toString()]))),onChange:e=>oe(Number(e))}]},{id:"changeStationType",title:V("header.settings.procedures.changeStationType.title"),onClose:()=>de(!ce),field:[{type:"select",label:V("header.settings.procedures.changeStationType.changeFrom"),options:ne,value:ue,disabledOptions:[he],onChange:e=>ge(e)},{type:"select",label:V("header.settings.procedures.changeStationType.changeTo"),options:ne,value:he,disabledOptions:["any",ue],onChange:e=>pe(e)}]},{id:"changeLineStyleType",title:V("header.settings.procedures.changeLineStyleType.title"),onClose:()=>me(!ye),field:[{type:"select",label:V("header.settings.procedures.changeLineStyleType.changeFrom"),options:se,value:be,disabledOptions:[Se],onChange:e=>fe(e)},{type:"select",label:V("header.settings.procedures.changeLineStyleType.changeTo"),options:se,value:Se,disabledOptions:["any",be],onChange:e=>Ce(e)}]},{id:"changeLinePathType",title:V("header.settings.procedures.changeLinePathType.title"),onClose:()=>xe(!je),field:[{type:"select",label:V("header.settings.procedures.changeLinePathType.changeFrom"),options:te,value:Ae,disabledOptions:[ve],onChange:e=>Ee(e)},{type:"select",label:V("header.settings.procedures.changeLinePathType.changeTo"),options:te,value:ve,disabledOptions:["any","simple",Ae],onChange:e=>Oe(e)}]},{id:"changeColor",title:V("header.settings.procedures.changeColor.title"),onClose:()=>Ne(!Te),field:[{type:"custom",label:V("header.settings.procedures.changeColor.changeFrom"),component:s.jsx(z,{data:Ie,displayHandler:e=>s.jsx(P,{name:e.value,fg:e.theme[3],bg:e.theme[2],title:e.theme[1],sx:{display:"inline-block",overflow:"hidden",textOverflow:"ellipsis"}}),filter:(e,t)=>t.id.toLowerCase().includes(e.toLowerCase())||Object.values(t.id).some((t=>t.toLowerCase().includes(e.toLowerCase()))),value:Le.value,onChange:e=>ke(e)})},{type:"custom",label:V("header.settings.procedures.changeColor.changeTo"),component:s.jsx(I,{theme:we,onClick:()=>{Pe(!0),$(M(G))}})}]}];return B.useEffect((()=>{t&&(ie(!1),de(!1),me(!1),xe(!1),Ne(!1),oe(0),Me([ae,...F(ee.current,U?[...q].filter((e=>e.startsWith("stn")||e.startsWith("misc_node"))):ee.current.nodes(),U?[...q].filter((e=>e.startsWith("line"))):ee.current.edges()).map((e=>({id:e.toString(),theme:e,value:"other"===e[1]?e[2]:e[1]})))]),ke(ae))}),[t]),s.jsxs(n,{isOpen:t,onClose:C,size:"md",scrollBehavior:"inside",children:[s.jsx(a,{}),s.jsxs(r,{children:[s.jsxs(i,{children:[s.jsx(l,{as:"b",fontSize:"xl",children:V(U?"panel.details.multipleSelection.change":"header.settings.procedures.changeType.title")}),s.jsx(o,{})]}),s.jsx(c,{children:s.jsx(d,{allowMultiple:!0,children:Re.map((e=>s.jsxs(u,{children:[s.jsxs(g,{onClick:e.onClose,children:[s.jsx(h,{as:"span",flex:"1",textAlign:"left",children:s.jsx(l,{as:"b",fontSize:"md",children:e.title})}),s.jsx(p,{})]}),s.jsx(y,{pb:4,children:s.jsx(R,{fields:e.field,minW:270})})]},e.id)))})}),s.jsxs(m,{children:[s.jsx(b,{colorScheme:"blue",variant:"outline",mr:"1",onClick:C,children:V("cancel")}),s.jsx(f,{label:V("header.settings.pro"),isOpen:!K.RMP_CLOUD,children:s.jsx(b,{colorScheme:"red",mr:"1",onClick:()=>{const e=null!=H&&H.includes("station")?[...q].filter((e=>e.startsWith("stn"))):U?[]:ee.current.filterNodes((e=>e.startsWith("stn"))),t=null!=H&&H.includes("misc-node")?[...q].filter((e=>e.startsWith("misc_node"))):U?[]:ee.current.filterNodes((e=>e.startsWith("misc_node"))),s=U?[...q].filter((e=>e.startsWith("line"))):ee.current.edges();H&&!H.includes("station")||!ce||((e,t,s,n)=>{n.filter((s=>"any"===t||e.getNodeAttribute(s,"type")===t)).forEach((t=>{X(e,t,s)}))})(ee.current,ue,he,e),H&&!H.includes("line")||!ye||((e,t,s,n,a)=>{a.filter((s=>"any"===t||e.getEdgeAttribute(s,"style")===t)).forEach((t=>{Z(e,t,s,n)}))})(ee.current,be,Se,G,s),H&&!H.includes("line")||!je||((e,t,s,n)=>{n.filter((s=>"any"===t||e.getEdgeAttribute(s,"type")===t)).forEach((t=>{Y(e,t,s)}))})(ee.current,Ae,ve,s),Te&&(H&&!H.includes("line")||((e,t,s,n)=>{n.filter((t=>A.includes(e.getEdgeAttribute(t,"style")))).forEach((n=>{const a=e.getEdgeAttributes(n),r=a[a.style].color;("any"===t||r[0]==t[0]&&r[1]==t[1]&&r[2]==t[2]&&r[3]==t[3])&&e.mergeEdgeAttributes(n,{[a.style]:{color:s}})}))})(ee.current,"any"===Le.id?"any":Le.theme,we,s),(!H||H.includes("misc-node")||H.includes("station"))&&((e,t,s,n,a)=>{[...n,...a].forEach((n=>{const a=e.getNodeAttributes(n).type,r=e.getNodeAttribute(n,a);if(void 0!==r.color){const e=r.color;("any"===t||e[0]==t[0]&&e[1]==t[1]&&e[2]==t[2]&&e[3]==t[3])&&(r.color=s)}e.mergeNodeAttributes(n,{[a]:r})}))})(ee.current,"any"===Le.id?"any":Le.theme,we,e,t)),re&&((e,t,s,n,a)=>{[...t,...s].forEach((t=>{e.setNodeAttribute(t,"zIndex",a)})),n.forEach((t=>{e.setEdgeAttribute(t,"zIndex",a)}))})(ee.current,e,t,s,le),Q(),C()},isDisabled:!(K.RMP_CLOUD&&(re||ce||ye||je||Te)),children:V("apply")})})]})]})]})}))}}}));
