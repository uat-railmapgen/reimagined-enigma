System.register(["./chakra-legacy-DsJcG_7N.js","./index-legacy-BFE_ktWa.js","./react-legacy-S3BmMPiz.js","./master-manager-legacy-glkH6Og_.js"],(function(e,t){"use strict";var s,n,a,r,i,l,o,c,d,u,g,h,p,y,m,b,f,S,x,A,C,j,E,v,O,T,L,N,W,w,k,z,I,P,M,R,B,F,_,D,X;return{setters:[e=>{s=e.j,n=e.at,a=e.$,r=e.au,i=e.a1,l=e.a4,o=e.a2,c=e.a3,d=e.aV,u=e.aW,g=e.aX,h=e.B,p=e.aY,y=e.aZ,m=e.a5,b=e.O,f=e.aM},e=>{S=e.S,x=e.aK,A=e.at,C=e.l,j=e.k,E=e.m,v=e.L,O=e.o,T=e.c,L=e.d,N=e.q,W=e.t,w=e.v,k=e.C,z=e.M,I=e.Q,P=e.R,M=e.V,R=e.W,B=e.i},e=>{F=e.u,_=e.b},e=>{D=e.s,X=e.e}],execute:function(){const t=[S.ShmetroBasic2020,S.LondonTubeBasic,S.ShanghaiSuburbanRailway],Y=e("b",((e,s,n)=>{const a=e.getNodeAttribute(s,"type"),r=structuredClone(e.getNodeAttribute(s,a).names);for(let t=0;t<Math.abs(D[n].defaultAttrs.names.length-r.length);t++)D[n].defaultAttrs.names.length>r.length?r.push("Stn"):r.pop();const i={...D[n].defaultAttrs,names:r};Object.values(t).includes(a)&&Object.values(t).includes(n)||(i.nameOffsetX=e.getNodeAttribute(s,a).nameOffsetX,i.nameOffsetY=e.getNodeAttribute(s,a).nameOffsetY),x.includes(n)&&x.includes(a)&&(i.color=structuredClone(e.getNodeAttribute(s,a).color)),e.removeNodeAttribute(s,a),e.mergeNodeAttributes(s,{type:n,[n]:i})})),Z=e("c",((e,t,s,n)=>{const a=e.getEdgeAttribute(t,"type"),r=e.getEdgeAttribute(t,"style");if(A[r].metadata.supportLinePathType.includes(s)){const r=structuredClone(C[s].defaultAttrs);let i=-1;if(n&&s!==j.Simple){const[n,a]=e.extremities(t),l=r.startFrom;i=E(e,s,n,a,l)}e.setEdgeAttribute(t,"parallelIndex",i),e.removeEdgeAttribute(t,a),e.mergeEdgeAttributes(t,{type:s,[s]:r})}})),U=e("a",((e,t,s,n)=>{const a=e.getEdgeAttribute(t,"type"),r=e.getEdgeAttribute(t,"style");if(A[s].metadata.supportLinePathType.includes(a)){const a=e.getEdgeAttribute(t,"zIndex"),i=e.getEdgeAttribute(t,r);e.removeEdgeAttribute(t,r);const l=structuredClone(A[s].defaultAttrs);v.includes(r)&&v.includes(s)?l.color=i.color:v.includes(s)&&n&&(l.color=n),e.mergeEdgeAttributes(t,{style:s,[s]:l}),s===O.River?e.setEdgeAttribute(t,"zIndex",-5):e.setEdgeAttribute(t,"zIndex",null!=a?a:0)}}));e("C",(e=>{const{isOpen:t,onClose:x,isSelect:E,filter:V}=e,{t:q}=F(),H=T(),{selected:K,theme:Q,paletteAppClip:{output:$}}=L((e=>e.runtime)),{preference:{autoParallel:G}}=L((e=>e.app)),{activeSubscriptions:J}=L((e=>e.account)),ee=_.useCallback((()=>{H(N()),H(W()),H(w(te.current.export()))}),[H,N,W,w]),te=_.useRef(window.graph),se={any:q("header.settings.procedures.changeType.any"),...Object.fromEntries(Object.entries(C).map((([e,t])=>[e,q(t.metadata.displayName).toString()])))},ne={any:q("header.settings.procedures.changeType.any"),...Object.fromEntries(Object.entries(A).map((([e,t])=>[e,q(t.metadata.displayName).toString()])))},ae={any:q("header.settings.procedures.changeType.any"),...Object.fromEntries(Object.entries(D).map((([e,t])=>[e,q(t.metadata.displayName).toString()])))},re={id:"any",theme:[k.Other,"other","#ffffff",z.black],value:q("header.settings.procedures.changeType.any")},[ie,le]=_.useState(!1),[oe,ce]=_.useState(0),[de,ue]=_.useState(!1),[ge,he]=_.useState("any"),[pe,ye]=_.useState(S.ShmetroBasic),[me,be]=_.useState(!1),[fe,Se]=_.useState("any"),[xe,Ae]=_.useState(O.SingleColor),[Ce,je]=_.useState(!1),[Ee,ve]=_.useState("any"),[Oe,Te]=_.useState(j.Diagonal),[Le,Ne]=_.useState(!1),[We,we]=_.useState(re),[ke,ze]=_.useState(Q),[Ie,Pe]=_.useState(!1);_.useEffect((()=>{Ie&&$&&(ze($),Pe(!1))}),[null==$?void 0:$.toString()]);const[Me,Re]=_.useState([]),Be=[{id:"changeZIndex",title:q("header.settings.procedures.changeZIndex"),onClose:()=>le(!ie),field:[{type:"select",label:q("panel.details.info.zIndex"),value:oe,options:Object.fromEntries(Array.from({length:11},((e,t)=>[t-5,(t-5).toString()]))),onChange:e=>ce(Number(e))}]},{id:"changeStationType",title:q("header.settings.procedures.changeStationType.title"),onClose:()=>ue(!de),field:[{type:"select",label:q("header.settings.procedures.changeStationType.changeFrom"),options:ae,value:ge,disabledOptions:[pe],onChange:e=>he(e)},{type:"select",label:q("header.settings.procedures.changeStationType.changeTo"),options:ae,value:pe,disabledOptions:["any",ge],onChange:e=>ye(e)}]},{id:"changeLineStyleType",title:q("header.settings.procedures.changeLineStyleType.title"),onClose:()=>be(!me),field:[{type:"select",label:q("header.settings.procedures.changeLineStyleType.changeFrom"),options:ne,value:fe,disabledOptions:[xe],onChange:e=>Se(e)},{type:"select",label:q("header.settings.procedures.changeLineStyleType.changeTo"),options:ne,value:xe,disabledOptions:["any",fe],onChange:e=>Ae(e)}]},{id:"changeLinePathType",title:q("header.settings.procedures.changeLinePathType.title"),onClose:()=>je(!Ce),field:[{type:"select",label:q("header.settings.procedures.changeLinePathType.changeFrom"),options:se,value:Ee,disabledOptions:[Oe],onChange:e=>ve(e)},{type:"select",label:q("header.settings.procedures.changeLinePathType.changeTo"),options:se,value:Oe,disabledOptions:["any","simple",Ee],onChange:e=>Te(e)}]},{id:"changeColor",title:q("header.settings.procedures.changeColor.title"),onClose:()=>Ne(!Le),field:[{type:"custom",label:q("header.settings.procedures.changeColor.changeFrom"),component:s.jsx(I,{data:Me,displayHandler:e=>s.jsx(P,{name:e.value,fg:e.theme[3],bg:e.theme[2],title:e.theme[1],sx:{display:"inline-block",overflow:"hidden",textOverflow:"ellipsis"}}),filter:(e,t)=>t.id.toLowerCase().includes(e.toLowerCase())||Object.values(t.id).some((t=>t.toLowerCase().includes(e.toLowerCase()))),value:We.value,onChange:e=>we(e)})},{type:"custom",label:q("header.settings.procedures.changeColor.changeTo"),component:s.jsx(M,{theme:ke,onClick:()=>{Pe(!0),H(R(Q))}})}]}];return _.useEffect((()=>{t&&(le(!1),ue(!1),be(!1),je(!1),Ne(!1),ce(0),Re([re,...X(te.current,E?[...K].filter((e=>e.startsWith("stn")||e.startsWith("misc_node"))):te.current.nodes(),E?[...K].filter((e=>e.startsWith("line"))):te.current.edges()).map((e=>({id:e.toString(),theme:e,value:"other"===e[1]?e[2]:e[1]})))]),we(re))}),[t]),s.jsxs(n,{isOpen:t,onClose:x,size:"md",scrollBehavior:"inside",children:[s.jsx(a,{}),s.jsxs(r,{children:[s.jsxs(i,{children:[s.jsx(l,{as:"b",fontSize:"xl",children:q(E?"panel.details.multipleSelection.change":"header.settings.procedures.changeType.title")}),s.jsx(o,{})]}),s.jsx(c,{children:s.jsx(d,{allowMultiple:!0,children:Be.map((e=>s.jsxs(u,{children:[s.jsxs(g,{onClick:e.onClose,children:[s.jsx(h,{as:"span",flex:"1",textAlign:"left",children:s.jsx(l,{as:"b",fontSize:"md",children:e.title})}),s.jsx(p,{})]}),s.jsx(y,{pb:4,children:s.jsx(B,{fields:e.field,minW:270})})]},e.id)))})}),s.jsxs(m,{children:[s.jsx(b,{colorScheme:"blue",variant:"outline",mr:"1",onClick:x,children:q("cancel")}),s.jsx(f,{label:q("header.settings.pro"),isOpen:!J.RMP_CLOUD,children:s.jsx(b,{colorScheme:"red",mr:"1",onClick:()=>{const e=null!=V&&V.includes("station")?[...K].filter((e=>e.startsWith("stn"))):E?[]:te.current.filterNodes((e=>e.startsWith("stn"))),t=null!=V&&V.includes("misc-node")?[...K].filter((e=>e.startsWith("misc_node"))):E?[]:te.current.filterNodes((e=>e.startsWith("misc_node"))),s=E?[...K].filter((e=>e.startsWith("line"))):te.current.edges();V&&!V.includes("station")||!de||((e,t,s,n)=>{n.filter((s=>"any"===t||e.getNodeAttribute(s,"type")===t)).forEach((t=>{Y(e,t,s)}))})(te.current,ge,pe,e),V&&!V.includes("line")||!me||((e,t,s,n,a)=>{a.filter((s=>"any"===t||e.getEdgeAttribute(s,"style")===t)).forEach((t=>{U(e,t,s,n)}))})(te.current,fe,xe,Q,s),V&&!V.includes("line")||!Ce||((e,t,s,n,a)=>{n.filter((s=>"any"===t||e.getEdgeAttribute(s,"type")===t)).forEach((t=>{Z(e,t,s,a)}))})(te.current,Ee,Oe,s,G),Le&&(V&&!V.includes("line")||((e,t,s,n)=>{n.filter((t=>v.includes(e.getEdgeAttribute(t,"style")))).forEach((n=>{const a=e.getEdgeAttributes(n),r=a[a.style].color;("any"===t||r[0]==t[0]&&r[1]==t[1]&&r[2]==t[2]&&r[3]==t[3])&&e.mergeEdgeAttributes(n,{[a.style]:{color:s}})}))})(te.current,"any"===We.id?"any":We.theme,ke,s),(!V||V.includes("misc-node")||V.includes("station"))&&((e,t,s,n,a)=>{[...n,...a].forEach((n=>{const a=e.getNodeAttributes(n).type,r=e.getNodeAttribute(n,a);if(void 0!==r.color){const e=r.color;("any"===t||e[0]==t[0]&&e[1]==t[1]&&e[2]==t[2]&&e[3]==t[3])&&(r.color=s)}e.mergeNodeAttributes(n,{[a]:r})}))})(te.current,"any"===We.id?"any":We.theme,ke,e,t)),ie&&((e,t,s,n,a)=>{[...t,...s].forEach((t=>{e.setNodeAttribute(t,"zIndex",a)})),n.forEach((t=>{e.setEdgeAttribute(t,"zIndex",a)}))})(te.current,e,t,s,oe),ee(),x()},isDisabled:!(J.RMP_CLOUD&&(ie||de||me||Ce||Le)),children:q("apply")})})]})]})]})}))}}}));
