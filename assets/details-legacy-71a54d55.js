!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?t(Object(i),!0).forEach((function(t){r(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function r(t,n,r){return(n=function(t){var n=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"===e(n)?n:String(n)}(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,u,o=[],s=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);s=!0);}catch(c){l=!0,i=c}finally{try{if(!s&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}System.register(["./chakra-legacy-dae91ce7.js","./index-legacy-ccd08195.js","./react-legacy-57266490.js","./graph-legacy-32e4ad1d.js","./change-types-legacy-26afe372.js","./stations-legacy-0e83739a.js","./clipboard-legacy-52839e22.js","./misc-nodes-legacy-234c62be.js"],(function(e,t){"use strict";var a,u,o,s,l,c,d,f,p,h,g,m,b,y,j,v,x,w,A,N,S,O,E,C,k,W,z,P,T,R,D,I,_,M,U,F,L,V,$,q,B;return{setters:[function(e){a=e.j,u=e.$,o=e.a0,s=e.a1,l=e.s,c=e.A,d=e.M,f=e.m,p=e.n,h=e.p,g=e.r,m=e.ae},function(e){b=e.c,y=e.j,j=e.d,v=e.D,x=e.ah,w=e.z,A=e.A,N=e.t,S=e.N,O=e.q,E=e.v,C=e.aj,k=e.ak,W=e.y,z=e.n,P=e.al,T=e.am,R=e.an,D=e.ao,I=e.p},function(e){_=e.b},function(e){M=e.b},function(e){U=e.d,F=e.e,L=e.f},function(e){V=e.s},function(e){$=e.u,q=e.e},function(e){B=e.m}],execute:function(){function t(){var e=b().t,t=y(),n=j((function(e){return e.runtime})).selected,r=_.useRef(window.graph);return a.jsxs(u,{p:1,children:[a.jsxs(o,{as:"h5",size:"sm",children:[e("Selected Objects: ")," ",n.length]}),a.jsx(s,{m:"var(--chakra-space-1)",children:n.map((function(e){var n=r.current.getNodeAttributes(e),i=n.type,u=e.startsWith("stn")?n[i].names.join("/"):i;return a.jsx(l,{width:"100%",size:"sm",variant:"solid",onClick:function(){return function(e){t(v()),t(x(e))}(e)},overflow:"hidden",maxW:"270",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"ruby",children:u},e)}))})]})}function G(){var e=b().t,t=y(),n=_.useCallback((function(){t(w()),t(A(m.current.export()))}),[t,w,A]),r=j((function(e){return e.runtime})),u=r.selected,o=r.theme,s=u.at(0),m=_.useRef(window.graph),v=i(_.useState(!1),2),x=v[0],W=v[1],z=_.useRef(null),P=Object.fromEntries(Object.entries(N).map((function(t){var n=i(t,2),r=n[0],a=n[1];return[r,e(a.metadata.displayName).toString()]}))),T=i(_.useState(m.current.getEdgeAttribute(s,"type")),2),R=T[0],D=T[1],I=i(_.useState(void 0),2),M=I[0],L=I[1],V=Object.fromEntries(Object.entries(S).map((function(t){var n=i(t,2),r=n[0],a=n[1];return[r,e(a.metadata.displayName).toString()]}))),$=i(_.useState(m.current.getEdgeAttribute(s,"style")),2),q=$[0],B=$[1],G=i(_.useState(void 0),2),H=G[0],J=G[1],K=Object.values(O).filter((function(e){return!S[q].metadata.supportLinePathType.includes(e)})),Q=Object.values(E).filter((function(e){return!S[e].metadata.supportLinePathType.includes(R)})),X=function(e){e&&(M?(M&&(U(m.current,s,M),D(m.current.getEdgeAttribute(s,"type")),n()),L(void 0)):H&&(H&&(F(m.current,s,H,o),B(m.current.getEdgeAttribute(s,"style")),n()),J(void 0))),W(!1)};return a.jsxs(a.Fragment,{children:[a.jsx(C,{label:e("panel.details.info.linePathType"),minW:"276",children:a.jsx(k,{options:P,disabledOptions:K,defaultValue:R,value:R,onChange:function(e){var t=e.target.value;L(t),W(!0)}})}),a.jsx(C,{label:e("panel.details.info.lineStyleType"),minW:"276",children:a.jsx(k,{options:V,disabledOptions:Q,defaultValue:q,value:q,onChange:function(e){var t=e.target.value;J(t),W(!0)}})}),a.jsx(c,{isOpen:x,leastDestructiveRef:z,onClose:function(){return X(!1)},children:a.jsx(d,{children:a.jsxs(f,{children:[a.jsx(p,{children:e("warning")}),a.jsx(h,{children:e("panel.details.changeLineTypeContent")}),a.jsxs(g,{children:[a.jsx(l,{ref:z,onClick:function(){return X(!1)},children:e("cancel")}),a.jsx(l,{ml:"2",colorScheme:"red",onClick:function(){return X(!0)},children:e("panel.details.changeType")})]})]})})})]})}function H(){var e=b().t,t=y(),n=_.useCallback((function(){t(W()),t(A(u.current.export()))}),[t,W,A]),r=j((function(e){return e.runtime})).selected.at(0),u=_.useRef(window.graph),o=i(_.useState(!1),2),s=o[0],m=o[1],v=_.useRef(null),x=i(_.useState(void 0),2),w=x[0],N=x[1],S=u.current.getNodeAttribute(r,"type"),O=Object.fromEntries(Object.entries(V).map((function(t){var n=i(t,2),r=n[0],a=n[1];return[r,e(a.metadata.displayName).toString()]}))),E=function(e){e&&w&&(L(u.current,r,w),n()),N(void 0),m(!1)};return a.jsxs(a.Fragment,{children:[a.jsx(C,{label:e("panel.details.info.stationType"),minW:"276",children:a.jsx(k,{options:O,disabledOptions:[S],value:S,onChange:function(e){var t=e.target.value;N(t),m(!0)}})}),a.jsx(c,{isOpen:s,leastDestructiveRef:v,onClose:function(){return E(!1)},children:a.jsx(d,{children:a.jsxs(f,{children:[a.jsx(p,{children:e("warning")}),a.jsx(h,{children:e("panel.details.changeStationTypeContent")}),a.jsxs(g,{children:[a.jsx(l,{ref:v,onClick:function(){return E(!1)},children:e("cancel")}),a.jsx(l,{ml:"2",colorScheme:"red",onClick:function(){return E(!0)},children:e("panel.details.changeType")})]})]})})})]})}function J(){var e=b().t,n=y(),r=_.useCallback((function(){n(W()),n(w()),n(A(l.current.export()))}),[n,w,A]),i=j((function(e){return e.runtime})).selected,s=i.at(0),l=_.useRef(window.graph),c=[{type:"input",label:e("panel.details.info.id"),value:i.length>0?i.join(", "):"undefined",minW:276},{type:"select",label:e("panel.details.info.zIndex"),value:s?l.current.hasNode(s)?l.current.getNodeAttribute(s,"zIndex"):l.current.hasEdge(s)?l.current.getEdgeAttribute(s,"zIndex"):0:0,options:Object.fromEntries(Array.from({length:11},(function(e,t){return[t-5,(t-5).toString()]}))),onChange:function(e){return function(e){var t=Math.min(Math.max(e,-5),5);l.current.hasNode(s)&&l.current.setNodeAttribute(s,"zIndex",t),l.current.hasEdge(s)&&l.current.setEdgeAttribute(s,"zIndex",t),r()}(Number(e))}}];return 0===i.length||i.length>1&&c.push({type:"input",label:e("panel.details.info.type"),value:"multiple selection",minW:276}),a.jsxs(u,{p:1,children:[a.jsx(o,{as:"h5",size:"sm",children:e("panel.details.info.title")}),a.jsx(z,{fields:c,minW:130}),1===i.length&&s.startsWith("stn")&&l.current.hasNode(s)&&a.jsx(H,{}),1===i.length&&s.startsWith("line")&&l.current.hasEdge(s)&&a.jsx(G,{}),i.length>1&&a.jsx(t,{})]})}function K(){var e=b().t,t=y(),n=j((function(e){return e.runtime})).selected,r=n.at(0),s=_.useRef(window.graph),c=i(_.useState("undefined"),2),d=c[0],f=c[1],p=i(_.useState("undefined"),2),h=p[0],g=p[1],m=i(_.useState("undefined"),2),w=m[0],A=m[1],N=i(_.useState("undefined"),2),S=N[0],O=N[1];_.useEffect((function(){if(null!=r&&r.startsWith("line")){var e=i(s.current.extremities(r),2),t=e[0],n=e[1];if(f(t),g(n),t.startsWith("stn")){var a,u,o=s.current.getNodeAttribute(t,"type");A(null!==(a=null===(u=s.current.getNodeAttribute(t,o))||void 0===u?void 0:u.names.at(0))&&void 0!==a?a:"undefined")}if(n.startsWith("stn")){var l,c,d=s.current.getNodeAttribute(n,"type");O(null!==(l=null===(c=s.current.getNodeAttribute(n,d))||void 0===c?void 0:c.names.at(0))&&void 0!==l?l:"undefined")}}}),[n]);var E=$((function(){t(v()),t(x(d))})),C=$((function(){t(v()),t(x(h))})),k=[{type:"custom",label:e("panel.details.lineExtremities.source"),component:a.jsx(l,{flex:1,size:"sm",variant:"link",onClick:E,children:d})},{type:"custom",label:e("panel.details.lineExtremities.target"),component:a.jsx(l,{flex:1,size:"sm",variant:"link",onClick:C,children:h})},{type:"input",label:e("panel.details.lineExtremities.sourceName"),value:w},{type:"input",label:e("panel.details.lineExtremities.targetName"),value:S}];return a.jsxs(u,{p:1,children:[a.jsx(o,{as:"h5",size:"sm",children:e("panel.details.lineExtremities.title")}),a.jsx(z,{fields:k,minW:130})]})}function Q(){var e=b().t,t=y(),n=_.useCallback((function(){t(W()),t(w()),t(A(d.current.export()))}),[t,W,w,A]),r=j((function(e){return e.runtime})),s=r.selected,l=r.refresh.nodes,c=s.at(0),d=_.useRef(window.graph),f=i(_.useState({x:0,y:0}),2),p=f[0],h=f[1];_.useEffect((function(){if(null!=c&&c.startsWith("stn")||null!=c&&c.startsWith("misc_node_")){var e=d.current.getNodeAttribute(c,"x"),t=d.current.getNodeAttribute(c,"y");h({x:e,y:t})}}),[l,s]);var g=[{type:"input",label:e("panel.details.nodePosition.pos.x"),value:p.x.toString(),validator:function(e){return!Number.isNaN(e)},onChange:function(e){d.current.mergeNodeAttributes(c,{x:Number(e)}),n()}},{type:"input",label:e("panel.details.nodePosition.pos.y"),value:p.y.toString(),validator:function(e){return!Number.isNaN(e)},onChange:function(e){d.current.mergeNodeAttributes(c,{y:Number(e)}),n()}}];return a.jsxs(u,{p:1,children:[a.jsx(o,{as:"h5",size:"sm",children:e("panel.details.nodePosition.title")}),a.jsx(z,{fields:g,minW:130})]})}var X=n(n({},V),B),Y=function(){var e,t=y(),n=j((function(e){return e.runtime})).selected.at(0),i=window.graph.getNodeAttribute(n,"type"),u=X[i].attrsComponent,o=null!==(e=window.graph.getNodeAttribute(n,i))&&void 0!==e?e:{};return u&&a.jsx(u,{id:n,attrs:o,handleAttrsUpdate:function(e,n){var i=window.graph.getNodeAttribute(e,"type");window.graph.mergeNodeAttributes(e,r({},i,n)),t(W()),t(A(window.graph.export()))}})},Z=function(){var e,t,n=y(),i=j((function(e){return e.runtime})).selected.at(0),u=window.graph.getEdgeAttribute(i,"type"),o=null!==(e=window.graph.getEdgeAttribute(i,u))&&void 0!==e?e:{},s=N[u].attrsComponent,l=window.graph.getEdgeAttribute(i,"style"),c=null!==(t=window.graph.getEdgeAttribute(i,l))&&void 0!==t?t:{},d=S[l].attrsComponent;return a.jsxs(a.Fragment,{children:[s&&a.jsx(s,{id:i,attrs:o,handleAttrsUpdate:function(e,t){window.graph.mergeEdgeAttributes(e,r({},u,t)),n(w()),n(A(window.graph.export()))}}),d&&a.jsx(d,{id:i,attrs:c,handleAttrsUpdate:function(e,t){window.graph.mergeEdgeAttributes(e,r({},l,t)),n(w()),n(A(window.graph.export()))}})]})};e("default",(function(){var e=b().t,t=y(),n=_.useRef(window.graph),r=_.useCallback((function(){t(W()),t(w()),t(A(n.current.export()))}),[t,W,w,A]),i=j((function(e){return e.runtime})),s=i.selected,c=i.mode,d=s.at(0);return a.jsxs(P,{isOpen:s.length>0&&!c.startsWith("line"),width:300,header:"Dummy header",alwaysOverlay:!0,children:[a.jsx(T,{onClose:function(){return t(v())},children:e("panel.details.header")}),a.jsxs(R,{children:[a.jsx(J,{}),1===s.length&&n.current.hasNode(d)&&a.jsx(Q,{}),1===s.length&&n.current.hasEdge(d)&&a.jsx(K,{}),1===s.length&&a.jsxs(u,{p:1,children:[a.jsx(o,{as:"h5",size:"sm",children:e("panel.details.specificAttrsTitle")}),window.graph.hasNode(d)&&a.jsx(Y,{}),window.graph.hasEdge(d)&&a.jsx(Z,{})]})]}),a.jsx(D,{children:a.jsxs(m,{children:[1===s.length&&n.current.hasNode(s.at(0))&&a.jsx(l,{size:"sm",variant:"outline",onClick:function(){return function(e){var r=structuredClone(n.current.getNodeAttributes(e));r.x+=50,r.y+=50;var i=e.startsWith("stn")?"stn_".concat(I(10)):"misc_node_".concat(I(10));n.current.addNode(i,r),t(W()),t(A(n.current.export()))}(s.at(0))},children:e("panel.details.footer.duplicate")}),a.jsx(l,{size:"sm",variant:"outline",onClick:function(){return function(e){var t=new Set(e),r=M(n.current,t),i=q(n.current,t,new Set(r));navigator.clipboard.writeText(i)}(s)},children:e("panel.details.footer.copy")}),a.jsx(l,{size:"sm",variant:"outline",onClick:function(){return e=s,t(v()),void e.forEach((function(e){n.current.hasNode(e)?(n.current.dropNode(e),r()):n.current.hasEdge(e)&&(n.current.dropEdge(e),t(w()),t(A(n.current.export())))}));var e},children:e("panel.details.footer.remove")})]})})]})}))}}}))}();
