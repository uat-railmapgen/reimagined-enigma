!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?t(Object(i),!0).forEach((function(t){r(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function r(t,n,r){return(n=function(t){var n=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"===e(n)?n:String(n)}(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,s,o=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}System.register(["./chakra-legacy-dae91ce7.js","./index-legacy-50a0b4ff.js","./react-legacy-57266490.js","./graph-legacy-4822bfab.js","./stations-legacy-178b2064.js","./change-types-legacy-82d4d773.js","./clipboard-legacy-0d85ed4c.js","./misc-nodes-legacy-5cf5e22f.js"],(function(e,t){"use strict";var a,s,o,u,l,c,d,f,p,h,g,m,b,y,j,v,x,w,A,S,N,O,E,C,k,z,W,P,T,R,D,I,M,_,U,F,L,q,V,$,B,G;return{setters:[function(e){a=e.j,s=e.$,o=e.a0,u=e.a1,l=e.s,c=e.A,d=e.M,f=e.m,p=e.n,h=e.p,g=e.r,m=e.q,b=e.ae},function(e){y=e.c,j=e.j,v=e.d,x=e.D,w=e.ah,A=e.z,S=e.A,N=e.t,O=e.N,E=e.q,C=e.v,k=e.aj,z=e.ak,W=e.y,P=e.n,T=e.al,R=e.am,D=e.an,I=e.ao,M=e.p},function(e){_=e.b},function(e){U=e.b},function(e){F=e.s},function(e){L=e.d,q=e.e,V=e.f},function(e){$=e.u,B=e.e},function(e){G=e.m}],execute:function(){function t(){var e=y().t,t=j(),n=v((function(e){return e.runtime})).selected,r=_.useRef(window.graph);return a.jsxs(s,{children:[a.jsxs(o,{as:"h5",size:"sm",children:[e("panel.details.selected")," ",n.length]}),a.jsx(u,{m:"var(--chakra-space-1)",children:n.map((function(e){var n=r.current.getNodeAttributes(e),i=n.type,s=e.startsWith("stn")?n[i].names.join("/"):i;return a.jsx(l,{width:"100%",size:"sm",variant:"solid",onClick:function(){return function(e){t(x()),t(w(e))}(e)},overflow:"hidden",maxW:"270",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"ruby",children:s},e)}))})]})}function H(){var e=y().t,t=j(),n=_.useCallback((function(){t(A()),t(S(m.current.export()))}),[t,A,S]),r=v((function(e){return e.runtime})),s=r.selected,o=r.theme,u=s.at(0),m=_.useRef(window.graph),b=i(_.useState(!1),2),x=b[0],w=b[1],W=_.useRef(null),P=Object.fromEntries(Object.entries(N).map((function(t){var n=i(t,2),r=n[0],a=n[1];return[r,e(a.metadata.displayName).toString()]}))),T=i(_.useState(m.current.getEdgeAttribute(u,"type")),2),R=T[0],D=T[1],I=i(_.useState(void 0),2),M=I[0],U=I[1],F=Object.fromEntries(Object.entries(O).map((function(t){var n=i(t,2),r=n[0],a=n[1];return[r,e(a.metadata.displayName).toString()]}))),V=i(_.useState(m.current.getEdgeAttribute(u,"style")),2),$=V[0],B=V[1],G=i(_.useState(void 0),2),H=G[0],J=G[1],K=Object.values(E).filter((function(e){return!O[$].metadata.supportLinePathType.includes(e)})),Q=Object.values(C).filter((function(e){return!O[e].metadata.supportLinePathType.includes(R)})),X=function(e){e&&(M?(M&&(L(m.current,u,M),D(m.current.getEdgeAttribute(u,"type")),n()),U(void 0)):H&&(H&&(q(m.current,u,H,o),B(m.current.getEdgeAttribute(u,"style")),n()),J(void 0))),w(!1)};return a.jsxs(a.Fragment,{children:[a.jsx(k,{label:e("panel.details.info.linePathType"),minW:"276",children:a.jsx(z,{options:P,disabledOptions:K,defaultValue:R,value:R,onChange:function(e){var t=e.target.value;U(t),w(!0)}})}),a.jsx(k,{label:e("panel.details.info.lineStyleType"),minW:"276",children:a.jsx(z,{options:F,disabledOptions:Q,defaultValue:$,value:$,onChange:function(e){var t=e.target.value;J(t),w(!0)}})}),a.jsx(c,{isOpen:x,leastDestructiveRef:W,onClose:function(){return X(!1)},children:a.jsx(d,{children:a.jsxs(f,{children:[a.jsx(p,{children:e("warning")}),a.jsx(h,{children:e("panel.details.changeLineTypeContent")}),a.jsxs(g,{children:[a.jsx(l,{ref:W,onClick:function(){return X(!1)},children:e("cancel")}),a.jsx(l,{ml:"2",colorScheme:"red",onClick:function(){return X(!0)},children:e("panel.details.changeType")})]})]})})})]})}function J(){var e=y().t,t=j(),n=_.useCallback((function(){t(W()),t(S(s.current.export()))}),[t,W,S]),r=v((function(e){return e.runtime})).selected.at(0),s=_.useRef(window.graph),o=i(_.useState(!1),2),u=o[0],m=o[1],b=_.useRef(null),x=i(_.useState(void 0),2),w=x[0],A=x[1],N=s.current.getNodeAttribute(r,"type"),O=Object.fromEntries(Object.entries(F).map((function(t){var n=i(t,2),r=n[0],a=n[1];return[r,e(a.metadata.displayName).toString()]}))),E=function(e){e&&w&&(V(s.current,r,w),n()),A(void 0),m(!1)};return a.jsxs(a.Fragment,{children:[a.jsx(k,{label:e("panel.details.info.stationType"),minW:"276",children:a.jsx(z,{options:O,disabledOptions:[N],value:N,onChange:function(e){var t=e.target.value;A(t),m(!0)}})}),a.jsx(c,{isOpen:u,leastDestructiveRef:b,onClose:function(){return E(!1)},children:a.jsx(d,{children:a.jsxs(f,{children:[a.jsx(p,{children:e("warning")}),a.jsx(h,{children:e("panel.details.changeStationTypeContent")}),a.jsxs(g,{children:[a.jsx(l,{ref:b,onClick:function(){return E(!1)},children:e("cancel")}),a.jsx(l,{ml:"2",colorScheme:"red",onClick:function(){return E(!0)},children:e("panel.details.changeType")})]})]})})})]})}function K(){var e=y().t,n=j(),r=_.useCallback((function(){n(W()),n(A()),n(S(l.current.export()))}),[n,A,S]),i=v((function(e){return e.runtime})).selected,u=i.at(0),l=_.useRef(window.graph),c=[];return 0===i.length||(1===i.length?(c.push({type:"input",label:e("panel.details.info.id"),value:i.length>0?i.join(", "):"undefined",minW:276}),c.push({type:"select",label:e("panel.details.info.zIndex"),value:u?l.current.hasNode(u)?l.current.getNodeAttribute(u,"zIndex"):l.current.hasEdge(u)?l.current.getEdgeAttribute(u,"zIndex"):0:0,options:Object.fromEntries(Array.from({length:11},(function(e,t){return[t-5,(t-5).toString()]}))),onChange:function(e){return function(e){var t=Math.min(Math.max(e,-5),5);l.current.hasNode(u)&&l.current.setNodeAttribute(u,"zIndex",t),l.current.hasEdge(u)&&l.current.setEdgeAttribute(u,"zIndex",t),r()}(Number(e))}})):i.length>1&&c.push({type:"input",label:e("panel.details.info.type"),value:"multiple selection",minW:276})),a.jsxs(s,{p:1,children:[a.jsx(o,{as:"h5",size:"sm",children:e("panel.details.info.title")}),a.jsx(P,{fields:c,minW:130}),1===i.length&&u.startsWith("stn")&&l.current.hasNode(u)&&l.current.getNodeAttribute(u,"type")in F&&a.jsx(J,{}),1===i.length&&u.startsWith("line")&&l.current.hasEdge(u)&&l.current.getEdgeAttribute(u,"type")in N&&l.current.getEdgeAttribute(u,"style")in O&&a.jsx(H,{}),1===i.length&&u.startsWith("line")&&l.current.hasEdge(u)&&a.jsx(H,{}),i.length>1&&a.jsx(t,{})]})}function Q(){var e=y().t,t=j(),n=v((function(e){return e.runtime})).selected,r=n.at(0),u=_.useRef(window.graph),c=i(_.useState("undefined"),2),d=c[0],f=c[1],p=i(_.useState("undefined"),2),h=p[0],g=p[1],m=i(_.useState("undefined"),2),b=m[0],A=m[1],S=i(_.useState("undefined"),2),N=S[0],O=S[1];_.useEffect((function(){if(null!=r&&r.startsWith("line")){var e=i(u.current.extremities(r),2),t=e[0],n=e[1];if(f(t),g(n),t.startsWith("stn")){var a,s,o=u.current.getNodeAttribute(t,"type");A(null!==(a=null===(s=u.current.getNodeAttribute(t,o))||void 0===s?void 0:s.names.at(0))&&void 0!==a?a:"undefined")}if(n.startsWith("stn")){var l,c,d=u.current.getNodeAttribute(n,"type");O(null!==(l=null===(c=u.current.getNodeAttribute(n,d))||void 0===c?void 0:c.names.at(0))&&void 0!==l?l:"undefined")}}}),[n]);var E=$((function(){t(x()),t(w(d))})),C=$((function(){t(x()),t(w(h))})),k=[{type:"custom",label:e("panel.details.lineExtremities.source"),component:a.jsx(l,{flex:1,size:"sm",variant:"link",onClick:E,children:d})},{type:"custom",label:e("panel.details.lineExtremities.target"),component:a.jsx(l,{flex:1,size:"sm",variant:"link",onClick:C,children:h})},{type:"input",label:e("panel.details.lineExtremities.sourceName"),value:b},{type:"input",label:e("panel.details.lineExtremities.targetName"),value:N}];return a.jsxs(s,{p:1,children:[a.jsx(o,{as:"h5",size:"sm",children:e("panel.details.lineExtremities.title")}),a.jsx(P,{fields:k,minW:130})]})}function X(){var e=y().t,t=j(),n=_.useCallback((function(){t(W()),t(A()),t(S(d.current.export()))}),[t,W,A,S]),r=v((function(e){return e.runtime})),u=r.selected,l=r.refresh.nodes,c=u.at(0),d=_.useRef(window.graph),f=i(_.useState({x:0,y:0}),2),p=f[0],h=f[1];_.useEffect((function(){if(null!=c&&c.startsWith("stn")||null!=c&&c.startsWith("misc_node_")){var e=d.current.getNodeAttribute(c,"x"),t=d.current.getNodeAttribute(c,"y");h({x:e,y:t})}}),[l,u]);var g=[{type:"input",label:e("panel.details.nodePosition.pos.x"),value:p.x.toString(),validator:function(e){return!Number.isNaN(e)},onChange:function(e){d.current.mergeNodeAttributes(c,{x:Number(e)}),n()}},{type:"input",label:e("panel.details.nodePosition.pos.y"),value:p.y.toString(),validator:function(e){return!Number.isNaN(e)},onChange:function(e){d.current.mergeNodeAttributes(c,{y:Number(e)}),n()}}];return a.jsxs(s,{p:1,children:[a.jsx(o,{as:"h5",size:"sm",children:e("panel.details.nodePosition.title")}),a.jsx(P,{fields:g,minW:130})]})}var Y=n(n({},F),G),Z=function(){var e,t=j(),n=v((function(e){return e.runtime})).selected.at(0),i=window.graph.getNodeAttribute(n,"type"),s=i in Y&&Y[i].attrsComponent,o=null!==(e=window.graph.getNodeAttribute(n,i))&&void 0!==e?e:{};return s?a.jsx(s,{id:n,attrs:o,handleAttrsUpdate:function(e,n){var i=window.graph.getNodeAttribute(e,"type");window.graph.mergeNodeAttributes(e,r({},i,n)),t(W()),t(S(window.graph.export()))}}):a.jsx(m,{fontSize:"xs",m:"var(--chakra-space-1)",children:"Oops :( We can't recognize this node. Maybe it is created in a newer version?"})},ee=function(){var e,t,n=j(),i=v((function(e){return e.runtime})).selected.at(0),s=window.graph.getEdgeAttribute(i,"type"),o=null!==(e=window.graph.getEdgeAttribute(i,s))&&void 0!==e?e:{},u=s in N&&N[s].attrsComponent,l=window.graph.getEdgeAttribute(i,"style"),c=null!==(t=window.graph.getEdgeAttribute(i,l))&&void 0!==t?t:{},d=l in O&&O[l].attrsComponent;return a.jsxs(a.Fragment,{children:[u?a.jsx(u,{id:i,attrs:o,handleAttrsUpdate:function(e,t){window.graph.mergeEdgeAttributes(e,r({},s,t)),n(A()),n(S(window.graph.export()))}}):a.jsx(m,{fontSize:"xs",m:"var(--chakra-space-1)",children:"Oops :( We can't recognize this line type. Maybe it is created in a newer version?"}),d?a.jsx(d,{id:i,attrs:c,handleAttrsUpdate:function(e,t){window.graph.mergeEdgeAttributes(e,r({},l,t)),n(A()),n(S(window.graph.export()))}}):a.jsx(m,{fontSize:"xs",m:"var(--chakra-space-1)",children:"Oops :( We can't recognize this line style. Maybe it is created in a newer version?"})]})};e("default",(function(){var e=y().t,t=j(),n=_.useRef(window.graph),r=_.useCallback((function(){t(W()),t(A()),t(S(n.current.export()))}),[t,W,A,S]),i=v((function(e){return e.runtime})),u=i.selected,c=i.mode,d=u.at(0);return a.jsxs(T,{isOpen:u.length>0&&!c.startsWith("line"),width:300,header:"Dummy header",alwaysOverlay:!0,children:[a.jsx(R,{onClose:function(){return t(x())},children:e("panel.details.header")}),a.jsxs(D,{children:[a.jsx(K,{}),1===u.length&&n.current.hasNode(d)&&a.jsx(X,{}),1===u.length&&n.current.hasEdge(d)&&a.jsx(Q,{}),1===u.length&&a.jsxs(s,{p:1,children:[a.jsx(o,{as:"h5",size:"sm",children:e("panel.details.specificAttrsTitle")}),window.graph.hasNode(d)&&a.jsx(Z,{}),window.graph.hasEdge(d)&&a.jsx(ee,{})]})]}),a.jsx(I,{children:a.jsxs(b,{children:[1===u.length&&n.current.hasNode(u.at(0))&&a.jsx(l,{size:"sm",variant:"outline",onClick:function(){return function(e){var r=structuredClone(n.current.getNodeAttributes(e));r.x+=50,r.y+=50;var i=e.startsWith("stn")?"stn_".concat(M(10)):"misc_node_".concat(M(10));n.current.addNode(i,r),t(W()),t(S(n.current.export()))}(u.at(0))},children:e("panel.details.footer.duplicate")}),a.jsx(l,{size:"sm",variant:"outline",onClick:function(){return function(e){var t=new Set(e),r=U(n.current,t),i=B(n.current,t,new Set(r));navigator.clipboard.writeText(i)}(u)},children:e("panel.details.footer.copy")}),a.jsx(l,{size:"sm",variant:"outline",onClick:function(){return e=u,t(x()),e.forEach((function(e){n.current.hasNode(e)?n.current.dropNode(e):n.current.hasEdge(e)&&n.current.dropEdge(e)})),void r();var e},children:e("panel.details.footer.remove")})]})})]})}))}}}))}();
