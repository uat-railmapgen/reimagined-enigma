import{j as e,at as Y,$ as F,au as J,a1 as q,a2 as X,a3 as Q,g as ns,av as Bs,a4 as j,B as R,aw as je,ax as ve,ay as U,az as Z,aA as V,as as Ps,h as Fe,O as N,a5 as ge,aB as dt,aC as ht,aD as Ce,a7 as T,aE as I,a6 as Ds,aF as us,aG as gs,af as $,aH as xs,aI as re,U as be,aJ as Je,aK as pt,aL as Gs,al as Us,d as Zs,R as Vs,q as Ks,Z as Ys,aM as Ee,aN as ut,ak as Be,aO as gt,aP as xt,aQ as D,aR as zs,aS as mt,aT as M,aU as C,W as ft,m as se,a8 as jt,a9 as bt}from"./chakra-t2DzLzXq.js";import{u as wt,r as O,E as we,M as St,C as yt,a as ms,n as os,L as Fs,S as H,R as vs,b as Js,c as E,d as G,e as P,f as Ct,g as zt,h as vt,i as kt,j as ke,s as Ot,k as De,l as qe,m as Mt,o as At,p as ks,q as qs,t as ae,v as te,w as ue,x as Xs,y as rs,z as Oe,A as Ie,B as Os,D as Qs,F as Ms,G as Tt,H as Rt,I as Et,J as Nt,K as It,N as As,O as _t,P as Ht,Q as Wt,T as Lt,U as Bt,V as Pt,W as Dt,X as Gt,Y as Ut,Z as Zt,_ as Vt,$ as Kt,a0 as Yt,a1 as Ft,a2 as Jt,a3 as qt,a4 as xe,a5 as Xt,a6 as Qt,a7 as $t,a8 as en,a9 as de,aa as sn,ab as Ts,ac as tn,ad as Xe,ae as nn,af as on,ag as rn,ah as an,ai as ln,aj as Rs,ak as cn,al as dn,am as hn,an as pn,ao as un}from"./index-Wkt7YmNv.js";import{u as W,b as m,r as Es,T as Ns}from"./react-DmTIgZys.js";import{I as $s}from"./index-semDsYsg.js";import{d as is,m as gn,a as xn,i as mn,s as fn,u as et,M as jn}from"./master-manager-C31nXZu9.js";import{C as bn}from"./change-type-modal-B7DLJi8c.js";var Is=function(s){return wt(O.ready(),s)},wn={ar:{ar:"العربية",en:"Arabic",ko:"아랍어","zh-Hans":"阿拉伯文","zh-Hant":"阿拉伯文"},az:{az:"Azərbaycanca",en:"Azerbaijani",ko:"아제르바이잔어","zh-Hans":"阿塞拜疆文","zh-Hant":"阿塞拜疆文"},ca:{ca:"Català",en:"Catalan",ko:"카탈루냐어","zh-Hans":"加泰罗尼亚文","zh-Hant":"加泰隆尼亞文"},da:{da:"Dansk",en:"Danish",ko:"덴마크어","zh-Hans":"丹麦文","zh-Hant":"丹麥文"},de:{de:"Deutsch",en:"German",ko:"독일어","zh-Hans":"德文","zh-Hant":"德文"},el:{el:"Ελληνικά",en:"Greek",ko:"그리스어","zh-Hans":"希腊文","zh-Hant":"希臘文"},en:{en:"English",ja:"英語",ko:"영어","zh-Hans":"英文","zh-Hant":"英文"},es:{en:"Spanish",es:"Español",ko:"스페인어","zh-Hans":"西班牙文","zh-Hant":"西班牙文"},fa:{en:"Persian",fa:"فارسی",ko:"페르시아어","zh-Hans":"波斯文","zh-Hant":"波斯文"},fr:{en:"French",fr:"Français",ko:"프랑스어","zh-Hans":"法文","zh-Hant":"法文"},ga:{en:"Irish",ga:"Gaeilge",ko:"아일랜드어","zh-Hans":"爱尔兰文","zh-Hant":"愛爾蘭文"},gd:{en:"Scottish Gaelic",gd:"Gàidhlig",ko:"스코틀랜드 게일어","zh-Hans":"苏格兰盖尔文","zh-Hant":"蘇格蘭蓋爾文"},hi:{en:"Hindi",hi:"हिन्दी",ko:"힌디어","zh-Hans":"印地文","zh-Hant":"印地文"},hu:{en:"Hungarian",hu:"Magyar",ko:"헝가리어","zh-Hans":"匈牙利文","zh-Hant":"匈牙利文"},id:{en:"Indoesian",id:"Bahasa Indonesia",ko:"인도네시아어","zh-Hans":"印尼文","zh-Hant":"印尼文"},it:{en:"Italian",it:"Italiano",ko:"이탈리아어","zh-Hans":"意大利文","zh-Hant":"意大利文"},ja:{en:"Japanese",ja:"日本語",ko:"일본어","zh-Hans":"日文","zh-Hant":"日文"},kk:{en:"Kazakh",kk:"Қазақша",ko:"카자흐어","zh-Hans":"哈萨克文","zh-Hant":"哈薩克文"},ko:{en:"Korean",ja:"韓国語",ko:"한국어","zh-Hans":"韩文","zh-Hant":"韓文"},ms:{en:"Malay",ko:"말레이어",ms:"Bahasa Melayu","zh-Hans":"马来文","zh-Hant":"馬來文"},no:{en:"Norwegian",ko:"노르웨이어",no:"Norsk","zh-Hans":"挪威文","zh-Hant":"挪威文"},pl:{en:"Polish",ko:"폴란드어",pl:"Polski","zh-Hans":"波兰文","zh-Hant":"波蘭文"},pt:{en:"Portuguese",ko:"포르투갈어",pt:"Português","zh-Hans":"葡萄牙文","zh-Hant":"葡萄牙文"},ro:{en:"Romanian",ko:"루마니아어",ro:"Română","zh-Hans":"罗马尼亚文","zh-Hant":"羅馬尼亞文"},ru:{en:"Russian",ko:"러시아어",ru:"Русский","zh-Hans":"俄文","zh-Hant":"俄文"},sv:{en:"Swedish",ko:"스웨덴어",sv:"Svenska","zh-Hans":"瑞典文","zh-Hant":"瑞典文"},th:{en:"Thai",ko:"태국어",th:"ภาษาไทย","zh-Hans":"泰文","zh-Hant":"泰文"},tr:{en:"Turkish",ko:"튀르키예어",tr:"Türkçe","zh-Hans":"土耳其文","zh-Hant":"土耳其文"},uk:{en:"Ukrainian",ko:"우크라이나어",uk:"Українська","zh-Hans":"乌克兰文","zh-Hant":"烏克蘭文"},ur:{en:"Urdo",ko:"우르두어",ur:"اردو","zh-Hans":"乌尔都文","zh-Hant":"烏爾都文"},uz:{en:"Uzbek",ko:"우즈베크어",uz:"Oʻzbekcha","zh-Hans":"乌兹别克文","zh-Hant":"烏茲別克文"},vi:{en:"Vietnamese",ko:"베트남어",vi:"Tiếng Việt","zh-Hans":"越南文","zh-Hant":"越南文"},zh:{en:"Chinese",ja:"中国語",ko:"중국어",zh:"中文","zh-Hans":"中文","zh-Hant":"中文"},"zh-Hans":{en:"Simplified Chinese",ja:"中国語（簡体字）",ko:"중국어 간체자","zh-Hans":"简体中文","zh-Hant":"簡體中文"},"zh-Hant":{en:"Traditional Chinese",ja:"中国語（繁体字）",ko:"중국어 정체자","zh-Hans":"繁体中文","zh-Hant":"繁體中文"}};const Sn="data:image/svg+xml,%3csvg%20width='98'%20height='96'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M48.854%200C21.839%200%200%2022%200%2049.217c0%2021.756%2013.993%2040.172%2033.405%2046.69%202.427.49%203.316-1.059%203.316-2.362%200-1.141-.08-5.052-.08-9.127-13.59%202.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015%204.934.326%207.523%205.052%207.523%205.052%204.367%207.496%2011.404%205.378%2014.235%204.074.404-3.178%201.699-5.378%203.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283%200-5.378%201.94-9.778%205.014-13.2-.485-1.222-2.184-6.275.486-13.038%200%200%204.125-1.304%2013.426%205.052a46.97%2046.97%200%200%201%2012.214-1.63c4.125%200%208.33.571%2012.213%201.63%209.302-6.356%2013.427-5.052%2013.427-5.052%202.67%206.763.97%2011.816.485%2013.038%203.155%203.422%205.015%207.822%205.015%2013.2%200%2018.905-11.404%2023.06-22.324%2024.283%201.78%201.548%203.316%204.481%203.316%209.126%200%206.6-.08%2011.897-.08%2013.526%200%201.304.89%202.853%203.316%202.364%2019.412-6.52%2033.405-24.935%2033.405-46.691C97.707%2022%2075.788%200%2048.854%200z'%20fill='%2324292f'/%3e%3c/svg%3e",yn="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2023.0.1,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%20270%20270'%20style='enable-background:new%200%200%20270%20270;'%20xml:space='preserve'%3e%3cstyle%20type='text/css'%3e%20.st0{fill:%23E01E5A;}%20.st1{fill:%2336C5F0;}%20.st2{fill:%232EB67D;}%20.st3{fill:%23ECB22E;}%20%3c/style%3e%3cg%3e%3cg%3e%3cpath%20class='st0'%20d='M99.4,151.2c0,7.1-5.8,12.9-12.9,12.9c-7.1,0-12.9-5.8-12.9-12.9c0-7.1,5.8-12.9,12.9-12.9h12.9V151.2z'/%3e%3cpath%20class='st0'%20d='M105.9,151.2c0-7.1,5.8-12.9,12.9-12.9s12.9,5.8,12.9,12.9v32.3c0,7.1-5.8,12.9-12.9,12.9%20s-12.9-5.8-12.9-12.9V151.2z'/%3e%3c/g%3e%3cg%3e%3cpath%20class='st1'%20d='M118.8,99.4c-7.1,0-12.9-5.8-12.9-12.9c0-7.1,5.8-12.9,12.9-12.9s12.9,5.8,12.9,12.9v12.9H118.8z'/%3e%3cpath%20class='st1'%20d='M118.8,105.9c7.1,0,12.9,5.8,12.9,12.9s-5.8,12.9-12.9,12.9H86.5c-7.1,0-12.9-5.8-12.9-12.9%20s5.8-12.9,12.9-12.9H118.8z'/%3e%3c/g%3e%3cg%3e%3cpath%20class='st2'%20d='M170.6,118.8c0-7.1,5.8-12.9,12.9-12.9c7.1,0,12.9,5.8,12.9,12.9s-5.8,12.9-12.9,12.9h-12.9V118.8z'/%3e%3cpath%20class='st2'%20d='M164.1,118.8c0,7.1-5.8,12.9-12.9,12.9c-7.1,0-12.9-5.8-12.9-12.9V86.5c0-7.1,5.8-12.9,12.9-12.9%20c7.1,0,12.9,5.8,12.9,12.9V118.8z'/%3e%3c/g%3e%3cg%3e%3cpath%20class='st3'%20d='M151.2,170.6c7.1,0,12.9,5.8,12.9,12.9c0,7.1-5.8,12.9-12.9,12.9c-7.1,0-12.9-5.8-12.9-12.9v-12.9H151.2z'/%3e%3cpath%20class='st3'%20d='M151.2,164.1c-7.1,0-12.9-5.8-12.9-12.9c0-7.1,5.8-12.9,12.9-12.9h32.3c7.1,0,12.9,5.8,12.9,12.9%20c0,7.1-5.8,12.9-12.9,12.9H151.2z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Cn=s=>{const{isOpen:r,onClose:a}=s,{t}=W(),i=O.getAppVersion();return e.jsxs(Y,{isOpen:r,onClose:a,size:"xl",scrollBehavior:"inside",children:[e.jsx(F,{}),e.jsxs(J,{children:[e.jsx(q,{children:t("header.about.title")}),e.jsx(X,{}),e.jsxs(Q,{paddingBottom:10,children:[e.jsxs(ns,{direction:"row",children:[e.jsx(Bs,{boxSize:"128px",src:"/rmp//logo192.png"}),e.jsxs(ns,{direction:"column",width:"100%",alignItems:"center",justifyContent:"center",children:[e.jsx(j,{fontSize:"xl",as:"b",children:t("header.about.rmp")}),e.jsx(j,{children:i}),e.jsx(j,{}),e.jsx(j,{fontSize:"sm",children:t("header.about.railmapgen")})]})]}),e.jsx(R,{margin:5,children:e.jsx(j,{fontSize:"xl",children:t("header.about.desc")})}),e.jsx(je,{as:"h5",size:"sm",mt:3,mb:2,children:t("header.about.contributors")}),e.jsx(je,{as:"h6",size:"xs",my:2,children:t("header.about.coreContributors")}),e.jsxs(ve,{children:[e.jsxs(U,{size:"lg",w:"85%",onClick:()=>window.open("https://github.com/thekingofcity","_blank"),cursor:"pointer",children:[e.jsx(Z,{src:"https://github.com/thekingofcity.png",size:"lg",my:2,ml:-1,mr:2}),e.jsxs(V,{display:"block",width:"100%",children:[e.jsx(j,{fontSize:"lg",fontWeight:"bold",mb:1,children:"thekingofcity"}),e.jsx(j,{fontSize:"sm",children:t("header.about.content1")}),e.jsx(j,{fontSize:"sm",align:"right",mb:1,children:t("header.about.content2")})]})]}),e.jsxs(U,{size:"lg",w:"85%",onClick:()=>window.open("https://github.com/langonginc","_blank"),cursor:"pointer",children:[e.jsx(Z,{src:"https://github.com/langonginc.png",size:"lg",my:2,ml:-1,mr:2}),e.jsxs(V,{display:"block",width:"100%",children:[e.jsx(j,{fontSize:"lg",fontWeight:"bold",mb:1,children:"langonginc"}),e.jsx(j,{fontSize:"sm",children:t("header.about.langonginc")}),e.jsx(j,{fontSize:"sm",align:"right",mb:1,children:"--Avicii"})]})]})]}),e.jsx(je,{as:"h6",size:"xs",my:2,children:t("header.about.styleContributors")}),e.jsxs(ve,{children:[e.jsxs(U,{size:"lg",w:"85%",onClick:()=>window.open("https://github.com/203IhzElttil","_blank"),cursor:"pointer",children:[e.jsx(Z,{src:"https://github.com/203IhzElttil.png",size:"lg",my:2,ml:-1,mr:2}),e.jsxs(V,{display:"block",width:"100%",children:[e.jsx(j,{fontSize:"lg",fontWeight:"bold",mb:1,children:"203IhzElttil"}),e.jsx(j,{fontSize:"sm",mb:1,children:t("header.about.203IhzElttil")})]})]}),e.jsxs(U,{size:"lg",w:"85%",onClick:()=>window.open("https://github.com/Swiftiecott","_blank"),cursor:"pointer",children:[e.jsx(Z,{src:"https://github.com/Swiftiecott.png",size:"lg",my:2,ml:-1,mr:2}),e.jsxs(V,{display:"block",width:"100%",children:[e.jsx(j,{fontSize:"lg",fontWeight:"bold",mb:1,children:"Swiftiecott"}),e.jsx(j,{fontSize:"sm",mb:1,children:t("header.about.Swiftiecott")})]})]}),e.jsxs(U,{size:"lg",w:"85%",onClick:()=>window.open("https://github.com/Minwtraft","_blank"),cursor:"pointer",children:[e.jsx(Z,{src:"https://github.com/Minwtraft.png",size:"lg",my:2,ml:-1,mr:2}),e.jsxs(V,{display:"block",width:"100%",children:[e.jsx(j,{fontSize:"lg",fontWeight:"bold",mb:1,children:"Minwtraft"}),e.jsx(j,{fontSize:"sm",mb:1,children:t("header.about.Minwtraft")})]})]})]}),e.jsx(je,{as:"h5",size:"sm",mt:3,mb:2,children:t("header.about.contactUs")}),e.jsxs(ve,{children:[e.jsxs(U,{size:"lg",w:"85%",onClick:()=>window.open("https://github.com/railmapgen/rmp/issues","_blank"),cursor:"pointer",children:[e.jsx(Z,{src:Sn,size:"lg",my:2,ml:-1,mr:2}),e.jsxs(V,{display:"block",width:"100%",children:[e.jsx(j,{fontSize:"lg",fontWeight:"bold",mb:1,children:t("header.about.github")}),e.jsx(j,{fontSize:"sm",children:t("header.about.githubContent")})]})]}),e.jsxs(U,{size:"lg",w:"85%",onClick:()=>window.open("https://join.slack.com/t/railmapgenerator/shared_invite/zt-1odhhta3n-DdZF~fnVwo_q0S0RJmgV8A","_blank"),cursor:"pointer",children:[e.jsx(Z,{src:yn,size:"lg",my:2,ml:-1,mr:2}),e.jsxs(V,{display:"block",width:"100%",children:[e.jsx(j,{fontSize:"lg",fontWeight:"bold",mb:1,children:t("header.about.slack")}),e.jsx(j,{fontSize:"sm",children:t("header.about.slackContent")}),e.jsx(j,{fontSize:"sm",as:"i",children:"#rmp, #gallery, #rmg, #palette-and-templates"})]})]})]})]})]})]})};function zn(s){return Ps({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 21a9 9 0 0 0 9 -9a9 9 0 0 0 -9 -9a9 9 0 0 0 -9 9a9 9 0 0 0 9 9z"},child:[]},{tag:"path",attr:{d:"M12 12m-4.5 0a4.5 4.5 0 1 0 9 0a4.5 4.5 0 1 0 -9 0"},child:[]}]})(s)}function vn(s){return Ps({tag:"svg",attr:{version:"1.1",viewBox:"0 0 17 17"},child:[{tag:"g",attr:{},child:[]},{tag:"path",attr:{d:"M13 10v-10h-13v13h13v-3zM1 1h11v8h-0.755l-2.564-3.319-1.159 1.214-2.248-3.881-3.576 5.986h-0.698v-8zM9.982 9h-7.119l2.398-4.014 2.064 3.564 1.275-1.337 1.382 1.787zM1 12v-2h11v2h-11zM17 3v13h-13v-1.984h1v0.984h11v-11h-2v-1h3z"},child:[]}]})(s)}const kn="data:image/png;base64,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",On="/rmp/assets/opencollective-icon-Ciasch0w.webp",Mn=s=>{const{isOpen:r,onClose:a}=s,{t}=W(),i=O.isAllowAnalytics(),n=()=>{O.isStandaloneWindow()?window.open("/rmp-gallery/#/donation","_blank"):O.openApp({appId:"rmp-gallery",hash:"/donation"})},o=c=>new URLSearchParams({title:"Donation: New ".concat(c," request for [city name]"),body:"Hi, I'd like to have new ".concat(c,", and here is my support.\n\n<!-- your donation entry -->\n\n<!-- reference (images or URLs) -->\n\n")}).toString();return m.useEffect(()=>{r&&i&&O.event(we.OPEN_DONATION,{})},[r]),e.jsxs(Y,{isOpen:r,onClose:a,size:"xl",scrollBehavior:"inside",children:[e.jsx(F,{}),e.jsxs(J,{children:[e.jsx(q,{children:t("header.donation.title")}),e.jsx(X,{}),e.jsxs(Q,{paddingBottom:10,children:[e.jsxs(ns,{direction:"row",alignItems:"center",justifyContent:"space-around",children:[e.jsx(j,{fontSize:"96px",fontFamily:"serif",children:"I"}),e.jsx($s,{size:"64px",color:"red"}),e.jsx(Bs,{boxSize:"96px",src:"/rmp//logo192.png"})]}),e.jsx(R,{margin:5,children:e.jsx(j,{fontSize:"xl",children:t("header.donation.content")})}),e.jsx(je,{as:"h5",size:"sm",mb:2,children:t("header.donation.rewards")}),e.jsxs(ve,{children:[e.jsxs(U,{size:"lg",w:"85%",onClick:n,cursor:"pointer",children:[e.jsx(Z,{icon:e.jsx(vn,{}),size:"lg",my:2,ml:-1,mr:2}),e.jsxs(V,{display:"block",width:"100%",pb:1,children:[e.jsx(j,{fontSize:"lg",fontWeight:"bold",mb:1,children:t("header.donation.gallery")}),e.jsx(j,{fontSize:"sm",children:t("header.donation.galleryContent")})]})]}),e.jsxs(U,{size:"lg",w:"85%",onClick:()=>window.open("https://github.com/railmapgen/rmp/issues/new?"+o("stations/nodes"),"_blank"),cursor:"pointer",children:[e.jsx(Z,{icon:e.jsx(zn,{}),size:"lg",my:2,ml:-1,mr:2}),e.jsxs(V,{display:"block",width:"100%",pb:1,children:[e.jsx(j,{fontSize:"lg",fontWeight:"bold",mb:1,children:t("header.donation.nodes")}),e.jsx(j,{fontSize:"sm",children:t("header.donation.nodesContent")})]})]}),e.jsxs(U,{size:"lg",w:"85%",onClick:()=>window.open("https://github.com/railmapgen/rmp/issues/new?"+o("features"),"_blank"),cursor:"pointer",children:[e.jsx(Z,{icon:e.jsx(St,{}),size:"lg",my:2,ml:-1,mr:2}),e.jsxs(V,{display:"block",width:"100%",pb:1,children:[e.jsx(j,{fontSize:"lg",fontWeight:"bold",mb:1,children:t("header.donation.features")}),e.jsx(j,{fontSize:"sm",children:t("header.donation.featuresContent")})]})]})]}),e.jsx(je,{as:"h5",size:"sm",mt:3,mb:2,children:t("header.donation.methods")}),e.jsxs(ve,{children:[e.jsxs(U,{size:"lg",w:"85%",onClick:()=>window.open("https://opencollective.com/rail-map-toolkit","_blank"),cursor:"pointer",children:[e.jsx(Z,{src:On,size:"lg",my:2,ml:-1,mr:2}),e.jsxs(V,{display:"block",width:"100%",pb:1,children:[e.jsx(j,{fontSize:"lg",fontWeight:"bold",mb:1,children:t("header.donation.openCollective")}),e.jsx(j,{fontSize:"sm",children:t("header.donation.viaUSD")})]})]}),e.jsxs(U,{size:"lg",w:"85%",onClick:()=>window.open("https://afdian.com/a/rail-map-toolkit","_blank"),cursor:"pointer",children:[e.jsx(Z,{src:kn,size:"lg",my:2,ml:-1,mr:2}),e.jsxs(V,{display:"block",width:"100%",pb:1,children:[e.jsx(j,{fontSize:"lg",fontWeight:"bold",mb:1,children:t("header.donation.afdian")}),e.jsx(j,{fontSize:"sm",children:t("header.donation.viaCNY")})]})]})]})]})]})]})};/*!
 * canvas-size
 * v2.0.0
 * https://github.com/jhildenbiddle/canvas-size
 * (c) 2015-2024 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */function _e(s){const r=s.sizes.shift(),a=Math.max(Math.ceil(r[0]),1),t=Math.max(Math.ceil(r[1]),1),i=[a-1,t-1,1,1],n=performance.now(),o=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope;let c,d;o?(c=new OffscreenCanvas(1,1),d=new OffscreenCanvas(a,t)):(c=document.createElement("canvas"),c.width=1,c.height=1,d=document.createElement("canvas"),d.width=a,d.height=t);const l=c.getContext("2d"),f=d.getContext("2d");f&&(f.fillRect.apply(f,i),l.drawImage(d,a-1,t-1,1,1,0,0,1,1));const p=l&&l.getImageData(0,0,1,1).data[3]!==0,h=parseInt(performance.now()-n);return[c,d].forEach(g=>{g.height=0,g.width=0}),o?(postMessage({width:a,height:t,testTime:h,isTestPass:p}),!p&&s.sizes.length&&setTimeout(()=>{_e(s)},0)):p?s.onSuccess({width:a,height:t,testTime:h}):(s.onError({width:a,height:t,testTime:h}),s.sizes.length&&setTimeout(()=>{_e(s)},0)),p}const Qe={area:[16384,14188,11402,11180,10836,8192,4096,1],height:[8388607,65535,32767,16384,8192,4096,1],width:[4194303,65535,32767,16384,8192,4096,1]},ze={max:null,min:1,sizes:[],step:1024,useWorker:!1,onError:Function.prototype,onSuccess:Function.prototype},Re={};function $e(s){const r=s.width===s.height,a=s.height===1,t=s.width===1,i=[];if(!s.width||!s.height)s.sizes.forEach(n=>{const o=r||a?n:1,c=r||t?n:1;i.push([o,c])});else{const n=s.min||ze.min,o=s.step||ze.step;let c=Math.max(s.width,s.height);for(;c>=n;){const d=r||a?c:1,l=r||t?c:1;i.push([d,l]),c-=o}}return i}function Pe(s){const r=typeof window<"u",a=r&&"Promise"in window,t=r&&"HTMLCanvasElement"in window,i=r&&"OffscreenCanvas"in window,n=URL.createObjectURL(new Blob([])).slice(-36),o=performance.now(),{onError:c,onSuccess:d,...l}=s,f=()=>parseInt(performance.now()-o);let p=null;if(!t)return!1;if(s.useWorker&&i){const h="\n            var canvasTest = ".concat(_e.toString(),";\n            onmessage = function(e) {\n                canvasTest(e.data);\n            };\n        "),g=new Blob([h],{type:"application/javascript"}),u=URL.createObjectURL(g);p=new Worker(u),URL.revokeObjectURL(u),p.onmessage=function(x){const{width:w,height:y,testTime:b,isTestPass:S}=x.data,k={width:w,height:y,testTime:b,totalTime:f()};S?(Re[n].onSuccess(k),delete Re[n]):Re[n].onError(k)}}if(a)return new Promise(h=>{const g={...s,onError(u){let{width:x,height:w,testTime:y}=u;const b={width:x,height:w,testTime:y,totalTime:f()};let S;if(s.sizes.length===0)S=!0;else{const[[k,A]]=s.sizes.slice(-1);S=x===k&&w===A}c(b),S&&h({...b,success:!1})},onSuccess(u){let{width:x,height:w,testTime:y}=u;const b={width:x,height:w,testTime:y,totalTime:f()};d(b),h({...b,success:!0})}};if(p){const{onError:u,onSuccess:x}=g;Re[n]={onError:u,onSuccess:x},p.postMessage(l)}else _e(g)});if(p)Re[n]={onError:c,onSuccess:d},p.postMessage(l);else return _e(s)}const An={maxArea(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=$e({width:s.max,height:s.max,min:s.min,step:s.step,sizes:[...Qe.area]}),a={...ze,...s,sizes:r};return Pe(a)},maxHeight(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=$e({width:1,height:s.max,min:s.min,step:s.step,sizes:[...Qe.height]}),a={...ze,...s,sizes:r};return Pe(a)},maxWidth(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=$e({width:s.max,height:1,min:s.min,step:s.step,sizes:[...Qe.width]}),a={...ze,...s,sizes:r};return Pe(a)},test(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r={...ze,...s};return r.sizes=[...r.sizes],r.width&&r.height&&(r.sizes=[[r.width,r.height]]),Pe(r)}};var He=(s=>(s.left="l",s.right="r",s))(He||{}),fe=(s=>(s.through="through",s.nonThrough="nonthrough",s))(fe||{}),Ue=(s=>(s.local="local",s.express="express",s.direct="direct",s))(Ue||{}),he=(s=>(s.MTR="mtr",s.GZMTR="gzmtr",s.SHMetro="shmetro",s))(he||{}),fs=(s=>(s.sh="sh",s.sh2020="sh2020",s))(fs||{});const ie=new Set,as=new Set,ls=new Set,cs=new Set,ds=new Map,pe=new Map,es=new Set,ss=new Map,K=new Map;let _=[],Ne=0;const Ge=new Map,ts=new Map,hs=new Set,Tn={localisedName:{en:"LEFT END"},num:"00",services:[Ue.local],parents:[],children:["lineend"],transfer:{groups:[{}],tick_direc:He.right,paid_area:!0},loop_pivot:!1,one_line:!0,int_padding:355},Rn={localisedName:{en:"RIGHT END"},num:"00",services:[Ue.local],parents:[],children:[],transfer:{groups:[{}],tick_direc:He.right,paid_area:!0},loop_pivot:!1,one_line:!0,int_padding:355},En={},st={svgWidth:{destination:1500,runin:1500,railmap:1500,indoor:1500},svg_height:400,style:he.SHMetro,y_pc:50,padding:10,branchSpacingPct:33,direction:He.right,platform_num:"1",theme:[yt.Shanghai,"sh1","#E3002B",ms.white],line_name:["地鐵線","Metro Line"],current_stn_idx:"jlaMj2",stn_list:En,namePosMTR:{isStagger:!0,isFlip:!0},customiseMTRDest:{isLegacy:!1,terminal:!1},line_num:"1",psd_num:"1",info_panel_type:fs.sh,direction_gz_x:40,direction_gz_y:70,coline:{},loop:!1,loop_info:{bank:!0,left_and_right_factor:0,bottom_factor:1}},Nn={localisedName:{},num:"",services:[Ue.local],parents:[],children:[],transfer:{groups:[{}],tick_direc:He.right,paid_area:!0},loop_pivot:!1,one_line:!0,int_padding:355},z=s=>"".concat(s[0],"/").concat(s[1],"=").concat(s[2]).concat(s[3]),js=s=>Fs.includes(s),In=s=>{if(js(s.style))return structuredClone(s[s.style].color)},_n=(s,r)=>{const[a,t]=s.extremities(r),i=s.getEdgeAttributes(r),n=i.style;if(a!=t&&js(n)){const o=In(i);cs.has(z(o))||(ls.add(o),cs.add(z(o)),ds.set(o,a),pe.set(z(o),new Set)),pe.get(z(o)).add(a),pe.get(z(o)).add(t),K.has(a)?_.push({target:t,next:K.get(a),color:o}):_.push({target:t,next:-1,color:o}),K.set(a,Ne),Ne++,K.has(t)?_.push({target:a,next:K.get(t),color:o}):_.push({target:a,next:-1,color:o}),K.set(t,Ne),Ne++}},tt=(s,r,a)=>{if(pe.get(z(a)).has(s)){pe.get(z(a)).delete(s);for(let t=K.get(s);t!=-1;t=_[t].next){const i=_[t].target,n=_[t].color;z(n)==z(a)&&tt(i,s,a)}}},nt=(s,r,a)=>{if(ie.has(s))return;ie.add(s);let t=0;const i=new Set;for(let n=K.get(s);n!=-1;n=_[n].next){const o=_[n].target,c=_[n].color;z(c)==z(a)&&(i.has(o)||(i.add(o),t++,o!=r&&nt(o,s,a)))}Ge.set(s,t)},_s=(s,r)=>{const a=s.stn_list.lineend.parents;a.push(r),s.stn_list.lineend.parents=structuredClone(a).reverse(),s.stn_list.lineend.branch={...s.stn_list.lineend.branch,left:s.stn_list.lineend.parents.length==2?[fe.through,a[1]]:void 0}},Hn=(s,r)=>{let a=0;for(let t=K.get(s);t!=-1;t=_[t].next){_[t].target;const i=_[t].color;z(i)==z(r)&&a++}return a},ot=(s,r,a)=>{if(hs.has(s))return[];hs.add(s);const t=[];for(let i=K.get(s);i!=-1;i=_[i].next){const n=_[i].target,o=_[i].color;n!=r&&z(o)==z(a)&&(n.startsWith("stn")?t.push(n):t.push(...ot(n,s,a)))}return t},ps=(s,r,a,t,i,n,o)=>{var h;if(ie.has(s)&&(!s.startsWith("misc_node_")&&o.stn_list[s]==null||s.startsWith("misc_node_")&&!as.has(s)||o.loop))return[];if(ie.has(s)&&o.stn_list[s]!=null&&Hn(s,n)-1>=2){const g=[...o.stn_list[s].parents,r];if(o.stn_list[g[1]]==null){const w=g[0];g[0]=g[1],g[1]=w}o.stn_list[s].parents=structuredClone(g).reverse(),o.stn_list[s].branch={...o.stn_list[s].branch,left:[fe.through,g[1]]};const u=[];for(const w of o.stn_list[s].children)w!=r&&u.push(w);o.stn_list[s].children=structuredClone(u),(h=o.stn_list[s].branch)==null||delete h.right;const x=[];for(const w of o.stn_list.lineend.parents)w!=s&&x.push(w);return o.stn_list.lineend.parents=structuredClone(x).reverse(),o.stn_list.lineend.branch={...o.stn_list.lineend.branch,left:o.stn_list.lineend.parents.length==2?[fe.through,x[1]]:void 0},u.length==0&&(o.stn_list[s].children=["lineend"],_s(o,s)),[s]}ie.add(s);const c=[],d=[],l=[],f=new Set,p=new Set;for(let g=K.get(s);g!=-1;g=_[g].next){const u=_[g].target,x=_[g].color;if(u!=a){if(z(x)==z(n)){if(p.has(u))continue;if(p.add(u),s.startsWith("misc_node_")){const w=ps(u,r,s,t+1,i,n,o);w.length!=0&&c.push(...w)}else{const w=ps(u,s,s,t+1,i,n,o);w.length!=0&&c.push(...w)}}if(!f.has(z(x))&&z(x)!=z(n)){f.add(z(x));const w={theme:x,name:["ch_".concat(z(x)),"en_".concat(z(x))]};l.push(w)}}}if(c.length==2){for(let g=0;g<2;g++)c[g]=="lineend"&&c.splice(g,1);if(o.stn_list[c[1]].parents.length>=2){const g=c[0];c[0]=c[1],c[1]=g}}if(ie.has(s)&&o.stn_list[s]!=null){const g=[];for(const u of o.stn_list.lineend.parents)u!=s&&g.push(u);o.stn_list.lineend.parents=structuredClone(g).reverse(),o.stn_list.lineend.branch={...o.stn_list.lineend.branch,left:o.stn_list.lineend.parents.length==2?[fe.through,g[1]]:void 0},c.length==0&&(hs.clear(),d.push(...ot(s,r,n)))}if(s.startsWith("misc_node_"))return as.add(s),c;{const g=i.getNodeAttributes(s).type,u=i.getNodeAttributes(s)[g];if(o.stn_list[s]=structuredClone(Nn),o.stn_list[s].localisedName={zh:u.names[0],en:u.names[1]},o.stn_list[s].num=String(t),i.getNodeAttributes(s).type==H.GzmtrBasic){const x=u;o.stn_list[s].num=x.stationCode,(x.secondaryNames[0]!==""||x.secondaryNames[1]!=="")&&(o.stn_list[s].localisedSecondaryName={zh:x.secondaryNames[0],en:x.secondaryNames[1]})}if(i.getNodeAttributes(s).type==H.GzmtrInt){const x=u,w=x.transfer[0];for(const y of w)if(z(y)==z(n)){o.stn_list[s].num=String(y[5]);break}(x.secondaryNames[0]!==""||x.secondaryNames[1]!=="")&&(o.stn_list[s].localisedSecondaryName={zh:x.secondaryNames[0],en:x.secondaryNames[1]})}return c.length!=0?(o.stn_list[s].children=structuredClone(c).reverse(),c.length==2&&(o.stn_list[s].branch={...o.stn_list[s].branch,right:[fe.through,c[1]]})):(o.stn_list[s].children=["lineend"],_s(o,s)),d.push(r),o.stn_list[s].parents=structuredClone(d).reverse(),d.length==2&&(o.stn_list[s].branch={...o.stn_list[s].branch,left:[fe.through,d[1]]}),l.length!=0&&(o.stn_list[s].transfer.groups[0].lines=structuredClone(l)),[s]}},Wn=(s,r,a,t)=>{const i=structuredClone(st);t=="LOOP"&&(i.loop=!0);let n;switch(s.getNodeAttributes(a).type){case H.GzmtrBasic:case H.GzmtrInt:n=he.GZMTR;break;case H.MTR:n=he.MTR;break;default:n=he.SHMetro;break}i.theme=structuredClone(r),i.style=n,i.stn_list.linestart=structuredClone(Tn),i.stn_list.lineend=structuredClone(Rn),ie.clear(),as.clear();const o=ps(a,"linestart","linestart",1,s,r,i);if(i.current_stn_idx=o[0],i.stn_list.linestart.children=[o[0]],!(Object.keys(i.stn_list).length<=3||i.stn_list.lineend.parents.length>=3))return structuredClone(i)},Ln=s=>{var t,i;ie.clear(),ls.clear(),cs.clear(),ds.clear(),pe.clear(),es.clear(),ss.clear(),K.clear(),_=[],Ne=0,Ge.clear(),ts.clear(),s.filterEdges(n=>n.startsWith("line")).forEach(n=>{js(s.getEdgeAttributes(n).style)&&_n(s,n)});let r=0;s.forEachNode(n=>{ts.set(n,++r)}),ts.set("lineend",++r);const a=[];for(const n of ls){let o=0;for(;pe.get(z(n)).size!=0;){let c="line_root";pe.get(z(n)).forEach(l=>{c=="line_root"&&(c=l)}),tt(c,"line_root",n);const d={theme:n,index:++o};es.add(d),ss.set(d,c)}}for(const n of es){const{theme:o}=n;ie.clear(),Ge.clear(),nt(ss.get(n),"line_root",o);let c=!0,d="LINE";const l=[];for(const[p,h]of Ge)h==1&&l.push(p),h==3&&(d="BRANCH"),h>3&&(c=!1);if(!c)continue;l.length==0&&(d="LOOP",l.push(ds.get(o)));const f=[];for(const p of l){const h=Wn(s,o,p,d);h!=null&&f.push([h,(t=h.stn_list[h.current_stn_idx].localisedName.zh)!=null?t:"",(i=h.stn_list[h.current_stn_idx].localisedName.en)!=null?i:""])}f.length!=0&&a.push({id:os(10),theme:o,param:structuredClone(f),type:d})}return a},Bn=s=>s[0]!=""&&s[1]!=""?s[0]+"_"+s[1]:s[0]!=""?s[0]:s[1]!=""?s[1]:"".concat(new Date().valueOf()),Pn=(s,r)=>{let a=s;return r.forEach((t,i)=>{const n=new RegExp("ch_".concat(i),"g"),o=new RegExp("en_".concat(i),"g");a=a.replace(n,t[0]),a=a.replace(o,t[1])}),a},Dn=(s,r,a,t)=>{s.line_name=r,s.line_num=String(a),is("RMG_".concat(Bn(r),".json"),"application/json",Pn(JSON.stringify(s),t))},Gn={LINE:"#33ccff",BRANCH:"#007B61",LOOP:"#ff6666"},Un=s=>{const{isOpen:r,onClose:a}=s,{t}=W(),i=m.useRef(window.graph),[n,o]=m.useState(!1),[c,d]=m.useState([[st,"",""]]),[l,f]=m.useState(["","",""]),[p,h]=m.useState(new Map),[g,u]=m.useState(new Map),[x,w]=m.useState([]);m.useEffect(()=>{if(r){const b=Ln(i.current),S=new Map;b.forEach(({id:k,theme:A})=>{S.set(z(A),k)}),w(b),h(S)}},[r]);const y=(b,S)=>document.getElementById("2RMG_"+S+"_"+b).value.trim();return e.jsxs(Y,{isOpen:r,onClose:a,size:"2xl",scrollBehavior:"inside",children:[e.jsx(F,{}),e.jsxs(J,{children:[e.jsx(q,{children:e.jsx(j,{as:"b",fontSize:"xl",children:t("header.download.2rmg.title")})}),e.jsx(X,{}),e.jsxs(Q,{children:[e.jsx(j,{fontSize:"sm",mt:"3",lineHeight:"100%",children:t("header.download.2rmg.info1")}),e.jsx(j,{fontSize:"sm",mt:"3",lineHeight:"100%",children:t("header.download.2rmg.info2")}),e.jsx("br",{}),x.length===0?e.jsx(j,{fontSize:"md",children:t("header.download.2rmg.noline")}):e.jsx("table",{children:e.jsx("tbody",{children:x.map(({id:b,theme:S,param:k,type:A})=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(vs,{name:S[0]=="other"&&S[1]=="other"?S[2]:S[1],bg:S[2],fg:S[3]})}),e.jsx("td",{children:e.jsx(Fe,{placeholder:t("header.download.2rmg.placeholder.chinese"),id:"2RMG_nameCh_".concat(b),size:"sm"})}),e.jsx("td",{children:e.jsx(Fe,{placeholder:t("header.download.2rmg.placeholder.english"),id:"2RMG_nameEn_".concat(b),size:"sm"})}),e.jsx("td",{children:e.jsx(Fe,{placeholder:t("header.download.2rmg.placeholder.lineCode"),id:"2RMG_lineNum_".concat(b),size:"sm"})}),e.jsx("td",{children:e.jsx(vs,{name:t("header.download.2rmg.type.".concat(A.toLowerCase())),bg:Gn[A],fg:ms.white})}),e.jsx("td",{children:e.jsx(N,{colorScheme:"blue",variant:"ghost",mr:"1",onClick:()=>{const B=y(b,"nameCh"),ee=y(b,"nameEn"),ne=y(b,"lineNum"),le=new Map;p.forEach((ce,Me)=>{le.set(Me,[y(ce,"nameCh"),y(ce,"nameEn")])}),d(k),f([B,ee,ne]),u(le),o(!0)},size:"sm",children:e.jsx(Js,{})})})]},JSON.stringify(S)))})})]}),e.jsx(ge,{children:e.jsx(N,{colorScheme:"blue",variant:"outline",mr:"1",onClick:a,children:t("close")})})]}),e.jsx(Zn,{isOpen:n,onClose:()=>o(!1),param:c,nameList:l,interchangeName:g})]})},Zn=s=>{const{isOpen:r,onClose:a,param:t,nameList:i,interchangeName:n}=s,{t:o}=W(),[c,d]=m.useState("");return m.useEffect(()=>{i[0]!=""&&i[1]!=""?d(i[0]+"/"+i[1]):i[0]!=""?d(i[0]):i[1]!=""?d(i[1]):d("")},[...i]),e.jsxs(Y,{isOpen:r,onClose:a,size:"md",scrollBehavior:"inside",children:[e.jsx(F,{}),e.jsxs(J,{children:[e.jsx(q,{children:e.jsxs(j,{as:"b",fontSize:"xl",children:[o("header.download.2rmg.download")," ",c]})}),e.jsx(X,{}),e.jsx(Q,{children:e.jsxs(dt,{children:[e.jsx(j,{fontSize:"sm",mb:"2",lineHeight:"100%",children:o("header.download.2rmg.downloadInfo")}),t.map(([l,f,p])=>e.jsxs(N,{onClick:()=>{Dn(l,[i[0],i[1]],i[2],n)},overflow:"hidden",size:"md",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"ruby",children:[f.replaceAll("\n","⏎"),"/",p.replaceAll("\n","⏎")]},"".concat(f).concat(p)))]})}),e.jsx(ge,{children:e.jsx(N,{colorScheme:"blue",variant:"outline",mr:"1",onClick:a,children:o("close")})})]})]})},Vn=s=>{const{isOpen:r,onClose:a}=s,{t}=W();return e.jsxs(Y,{isOpen:r,onClose:a,size:"xl",scrollBehavior:"inside",children:[e.jsx(F,{}),e.jsxs(J,{children:[e.jsx(q,{children:t("header.download.termsAndConditions")}),e.jsx(X,{}),e.jsx(Q,{children:e.jsxs(ht,{children:[e.jsxs(Ce,{children:["The layout of the elements on the signage or rail map, is designed by"," ",e.jsxs(T,{color:"teal.500",href:"https://www.shmetro.com/",isExternal:!0,children:["Shanghai Shentong Metro Group ",e.jsx(I,{as:E})]}),", ",e.jsxs(T,{color:"teal.500",href:"https://www.gzmtr.com/",isExternal:!0,children:["Guangzhou Metro Group ",e.jsx(I,{as:E})]})," or ",e.jsxs(T,{color:"teal.500",href:"https://www.mtr.com.hk/",isExternal:!0,children:["MTR Corporation ",e.jsx(I,{as:E})]}),", depending on your selection. You shall grant appropriate permit or license from the relevant company above before using the generated images for commercial purposes, if it is required to do so.",e.jsx("br",{}),"标志版或路线图的元素或布局，基于你所选择的风格，为",e.jsxs(T,{color:"teal.500",href:"https://www.shmetro.com/",isExternal:!0,children:["上海申通地铁集团 ",e.jsx(I,{as:E})]}),"，",e.jsxs(T,{color:"teal.500",href:"https://www.gzmtr.com/",isExternal:!0,children:["广州地铁集团公司 ",e.jsx(I,{as:E})]}),"或",e.jsxs(T,{color:"teal.500",href:"https://www.mtr.com.hk/",isExternal:!0,children:["港铁公司 ",e.jsx(I,{as:E})]}),"所设计。在产生的图像用作商业用途前，你应向相关公司取得适当之许可证或授权。"]}),e.jsxs(Ce,{children:["The elements including shapes and lines on the image are drawn by"," ",e.jsxs(T,{color:"teal.500",href:"https://www.github.com/thekingofcity",isExternal:!0,children:["thekingofcity ",e.jsx(I,{as:E})]})," and ",e.jsxs(T,{color:"teal.500",href:"https://www.github.com/wongchito",isExternal:!0,children:["Chito Wong ",e.jsx(I,{as:E})]}),", based on the design standards or rules of the companies listed above. You may use them for any purposes, but it is recommended to state the name and the link of software alongside.",e.jsx("br",{}),"图像的元素，包括图形及线条，均由",e.jsxs(T,{color:"teal.500",href:"https://www.github.com/thekingofcity",isExternal:!0,children:["thekingofcity ",e.jsx(I,{as:E})]}),"及",e.jsxs(T,{color:"teal.500",href:"https://www.github.com/wongchito",isExternal:!0,children:["Chito Wong ",e.jsx(I,{as:E})]}),"基于上述公司设计标准或准则绘制。你可将其用于任何目的，但我们建议你于使用同时附以我们的名字以及本网站地址。"]}),e.jsxs(Ce,{children:["Due to copyright, licensing and other legal restrictions, Rail Map Painter uses"," ",e.jsxs(T,{color:"teal.500",href:"https://github.com/ButTaiwan/genyo-font",isExternal:!0,children:["GenYoMin provided by ButTaiwan ",e.jsx(I,{as:E})]}),", and Vegur instead of MTRSung and Myriad Pro respectively to display and generate MTR-style signage. You shall grant appropriate permit or license from the manufacturers before using those generated images for commercial purposes.",e.jsx("br",{}),"由于著作权及其他法律限制，铁路路线图绘制器使用由",e.jsxs(T,{color:"teal.500",href:"https://github.com/ButTaiwan/genyo-font",isExternal:!0,children:["ButTaiwan提供的源樣明體 ",e.jsx(I,{as:E})]}),"，以及Vegur，以代替港铁样式标志牌所使用的地铁宋及Myriad Pro。在产生之图像用作商业用途前，你应向字型生产厂商取得适当之许可证或授权。"]}),e.jsxs(Ce,{children:["The exported images in PNG or SVG format may be modified, published, or used for other purposes except commercial use, under the conditions above.",e.jsx("br",{}),"输出的PNG或SVG图像可基于上述条款，在非商业使用时，用于修改、发行或其他用途。"]}),e.jsxs(Ce,{children:["All flag emojis shown on Windows platforms are designed by"," ",e.jsxs(T,{color:"teal.500",href:"https://openmoji.org/",isExternal:!0,children:["OpenMoji ",e.jsx(I,{as:E})]})," ","– the open-source emoji and icon project. License:",e.jsxs(T,{color:"teal.500",href:"https://creativecommons.org/licenses/by-sa/4.0/",isExternal:!0,children:["CC BY-SA 4.0 ",e.jsx(I,{as:E})]}),e.jsx("br",{}),"于Windows作业系统上显示的国旗Emoji为",e.jsxs(T,{color:"teal.500",href:"https://openmoji.org/",isExternal:!0,children:["OpenMoji ",e.jsx(I,{as:E})]}),"所设计。许可证：",e.jsxs(T,{color:"teal.500",href:"https://creativecommons.org/licenses/by-sa/4.0/",isExternal:!0,children:["CC BY-SA 4.0 ",e.jsx(I,{as:E})]})]}),e.jsxs(Ce,{children:["We reserve the rights, without prior notice, to modify, add, or remove these terms. The Chinese translation is for reference only. In case of any discrepancy between the English version and the Chinese version, the English version shall prevail.",e.jsx("br",{}),"我们保留修改、新增或移除上述条款之权利，而无需另行通知。中文译本仅供参考，文义如与英文有歧异，概以英文本为准。"]})]})})]})]})};function Kn(){const s=Ds("white","var(--chakra-colors-gray-800)"),r=G(),{telemetry:{project:a}}=P(v=>v.app),t=P(v=>v.param),i=O.isAllowAnalytics(),{t:n}=W(),o=m.useRef(window.graph),[c,d]=m.useState("png"),l={png:n("header.download.png"),svg:n("header.download.svg")},[f,p]=m.useState(2),[h,g]=m.useState({width:1,height:1,benchmark:.001}),[u,x]=m.useState(200),w=[10,25,33,50,67,75,100,125,150,175,200,250,300,400,500,750,1e3],y=Object.fromEntries(w.map(v=>[v,"".concat(v,"%")])),[b,S]=m.useState([]),[k,A]=m.useState(!1),B=[{type:"select",label:n("header.download.format"),value:c,options:l,onChange:v=>d(v==="png"?"png":"svg")}],ee=[{type:"select",label:n("header.download.svgVersion"),value:f,options:{1.1:n("header.download.svg1.1"),2:n("header.download.svg2")},onChange:v=>{p(v),v===1.1&&bs(!0)}}],ne=[{type:"select",label:n("header.download.scale"),value:u,options:y,disabledOptions:b,onChange:v=>x(v)},{type:"switch",label:n("header.download.transparent"),isChecked:k,onChange:A}],[le,ce]=m.useState(!1),[Me,We]=m.useState(!1),[L,bs]=m.useState(!1),[ws,rt]=m.useState(!1),[Ss,it]=m.useState(!1),[at,ys]=m.useState(!1);m.useEffect(()=>{(async()=>{const Ae=await An.maxArea({usePromise:!0,useWorker:!0});g(Ae)})()},[]),m.useEffect(()=>{if(le){const{xMin:v,yMin:Ae,xMax:Ze,yMax:Le}=Ct(o.current),[Ve,Se]=[Ze-v,Le-Ae],Te=w.filter(ye=>Ve*ye/100>h.width&&Se*ye/100>h.height);S(Te)}},[le]);const lt=()=>{i&&O.event(we.DOWNLOAD_PARAM,a?{"#nodes":o.current.order,"#edges":o.current.size}:{}),is("RMP_".concat(new Date().valueOf(),".json"),"application/json",Ot(t))},ct=async()=>{ce(!1),i&&O.event(we.DOWNLOAD_IMAGES,a?{numberOfNodes:o.current.order,numberOfEdges:o.current.size}:{});const{elem:v,width:Ae,height:Ze}=await gn(o.current,ws,L,f),Le=v.outerHTML.replace(/&nbsp;/g," ");if(c==="svg"){is("RMP_".concat(new Date().valueOf(),".svg"),"image/svg+xml",Le);return}document.body.appendChild(v);const Ve="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(Le)));document.body.removeChild(v),v.remove();const Se=document.createElement("canvas"),[Te,ye]=[Ae*u/100,Ze*u/100];Se.width=Te,Se.height=ye;const Ke=Se.getContext("2d");k||(Ke.fillStyle=s,Ke.fillRect(0,0,Te,ye));const Ye=new Image;Ye.onload=()=>{setTimeout(()=>{Ke.drawImage(Ye,0,0,Te,ye),Se.toBlob(Cs=>{if(!Cs){r(De({status:"error",message:n("header.download.imageTooBig")}));return}xn("RMP_".concat(new Date().valueOf(),".png"),Cs)},"image/png")},mn()?2e3:0)},Ye.src=Ve};return e.jsxs(us,{id:"download",children:[e.jsx(gs,{as:$,size:"sm",variant:"ghost",icon:e.jsx(Js,{})}),e.jsxs(xs,{children:[e.jsx(re,{icon:e.jsx(zt,{}),onClick:lt,children:n("header.download.config")}),e.jsxs(re,{icon:e.jsx(vt,{}),onClick:()=>ys(!0),children:[n("header.download.2rmg.title"),e.jsx(be,{ml:"1",colorScheme:"green",children:"New"})]}),e.jsx(re,{icon:e.jsx(kt,{}),onClick:()=>ce(!0),children:n("header.download.image")})]}),e.jsxs(Y,{size:"xl",isOpen:le,onClose:()=>ce(!1),children:[e.jsx(F,{}),e.jsxs(J,{children:[e.jsx(q,{children:n("header.download.image")}),e.jsx(X,{}),e.jsxs(Q,{children:[e.jsx(ke,{fields:B}),c==="svg"&&e.jsx(ke,{fields:ee}),c==="png"&&e.jsx(ke,{fields:ne}),c==="png"&&b.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(j,{as:"i",fontSize:"sm",children:n("header.download.disabledScaleOptions")}),e.jsx("br",{}),e.jsx(j,{as:"i",fontSize:"sm",children:n("header.download.disabledScaleOptionsWorkarounds")}),e.jsxs(T,{color:"teal.500",onClick:()=>window.open("https://github.com/RazrFalcon/resvg","_blank"),children:["RazrFalcon/resvg ",e.jsx(I,{as:E})]}),e.jsx("br",{})]}),e.jsx("br",{}),e.jsx(Je,{isChecked:L,isDisabled:c==="svg"&&f===1.1,onChange:v=>bs(v.target.checked),children:e.jsx(j,{children:n("header.download.useSystemFonts")})}),e.jsx(Je,{isChecked:ws,onChange:v=>rt(v.target.checked),children:e.jsxs(j,{children:[n("header.download.shareInfo1"),e.jsxs(T,{color:"teal.500",onClick:()=>window.open("https://railmapgen.github.io/rmp","_blank"),children:[n("header.about.rmp")," ",e.jsx(I,{as:E})]}),n("header.download.shareInfo2")]})}),e.jsx(Je,{isChecked:Ss,onChange:v=>it(v.target.checked),children:e.jsxs(j,{children:[n("header.download.termsAndConditionsInfo"),e.jsxs(T,{color:"teal.500",onClick:()=>We(!0),children:[n("header.download.termsAndConditions")," ",e.jsx(I,{as:E})]}),n("header.download.period")]})})]}),e.jsx(ge,{children:e.jsx(pt,{children:e.jsx(N,{colorScheme:"teal",variant:"outline",size:"sm",isDisabled:!Ss||c==="png"&&b.includes(u),onClick:ct,children:n("header.download.confirm")})})}),e.jsx(Vn,{isOpen:Me,onClose:()=>We(!1)})]})]}),e.jsx(Un,{isOpen:at,onClose:()=>ys(!1)})]})}const Yn=(s,{info_panel_type:r,line_num:a,stn_list:t,style:i,theme:n},o)=>{const c=Object.fromEntries(Object.keys(t).filter(d=>!["linestart","lineend"].includes(d)).map(d=>[d,"stn_".concat(os(10))]));Object.entries(t).filter(([d,l])=>!["linestart","lineend"].includes(d)).forEach(([d,l])=>{const f=s.filterNodes((p,h)=>Object.values(H).includes(h.type)&&h[h.type].names[0]===l.localisedName.zh);f.length!==0&&(c[d]=f[0])}),Object.entries(t).filter(([d,l])=>!["linestart","lineend"].includes(d)).filter(([d,l])=>s.filterNodes((f,p)=>Object.values(H).includes(p.type)&&p[p.type].names[0]===l.localisedName.zh).length===0).forEach(([d,l],f)=>{var x,w,y;let p=H.ShmetroBasic;const h=l.transfer.groups,g=h.map(b=>{var S;return(S=b.lines)!=null?S:[]}).flat();i===he.SHMetro?g.length>0?p=H.ShmetroInt:r===fs.sh2020?p=H.ShmetroBasic2020:p=H.ShmetroBasic:i===he.GZMTR?g.length>0?p=H.GzmtrInt:p=H.GzmtrBasic:i===he.MTR&&(p=H.MTR);const u={...structuredClone(fn[p].defaultAttrs),names:[(x=l.localisedName.zh)!=null?x:"",(w=l.localisedName.en)!=null?w:""]};p===H.ShmetroBasic2020?u.color=n:p===H.GzmtrBasic?(u.color=n,u.lineCode=a,u.stationCode=l.num):p===H.GzmtrInt?u.transfer=h.map((b,S)=>{var A,B;const k=(B=(A=b.lines)==null?void 0:A.map(ee=>{var ne;return[...(ne=ee.theme)!=null?ne:n,"1","01"]}))!=null?B:[];return S===0?[[...n,a,l.num],...k]:k}):p===H.MTR&&((y=h[0].lines)!=null&&y.length?u.transfer=[[[...n,"",""],...h[0].lines.map(b=>{var S;return[...(S=b.theme)!=null?S:n,"",""]})]]:u.transfer=[[]]),s.addNode(c[d],{visible:!0,zIndex:0,x:100+f*50,y:1e3,type:p,[p]:u})}),Object.entries(t).filter(([d,l])=>!["linestart","lineend"].includes(d)).forEach(([d,l])=>{l.children.filter(f=>!["linestart","lineend"].includes(f)).forEach(f=>{const p=qe.Diagonal,[h,g]=[c[d],c[f]],u=o?Mt(s,p,h,g,"from"):-1;s.addDirectedEdgeWithKey("line_".concat(os(10)),h,g,{visible:!0,zIndex:0,type:p,[qe.Diagonal]:structuredClone(At[qe.Diagonal].defaultAttrs),style:ks.SingleColor,[ks.SingleColor]:{color:n},reconcileId:"",parallelIndex:u})})})},Fn="rmg-bridge--",Jn={h:500,maxH:"70%","& iframe":{h:"100%",w:"100%"}};function qn(s){const{isOpen:r,onClose:a,onImport:t}=s,[i]=Es.useState(crypto.randomUUID()),n="/rmg/#/import?"+new URLSearchParams({parentComponent:O.getAppName(),parentId:i});return Es.useEffect(()=>{const o=new BroadcastChannel(Fn+i);return o.onmessage=c=>{const{event:d,data:l}=c.data;console.log("[rmp] Received event from RMG app clip:",d),d==="CLOSE"?a():d==="IMPORT"&&t(l)},()=>o.close()},[]),e.jsx(qs,{isOpen:r,onClose:a,sx:Jn,children:e.jsx("iframe",{src:n,loading:"lazy"})})}const Xn="RMP_GALLERY_CHANNEL",Qn="OPEN_TEMPLATE",Hs=new BroadcastChannel(Xn),$n={h:"80%",w:"80%","& iframe":{h:"100%",w:"100%"},"& div":{h:"100%",w:"100%"}};function eo(s){const{isOpen:r,onClose:a}=s,t=Gs(),{t:i}=W(),n=G(),{telemetry:{project:o}}=P(h=>h.app),c=O.isAllowAnalytics(),d=m.useRef(window.graph),l=m.useCallback(()=>{n(ae()),n(te()),n(ue(d.current.export()))},[n,ae,te,ue,d]),f=async h=>{const{version:g,...u}=JSON.parse(await Xs(JSON.stringify(h)));n(rs()),d.current.clear(),d.current.import(u.graph),l();const{svgViewBoxZoom:x,svgViewBoxMin:w}=u;typeof x=="number"&&n(Oe(x)),typeof w.x=="number"&&typeof w.y=="number"&&n(Ie(w))},p=async(h,g)=>{var w;const u=g?"https://".concat(g):"",x=await((w=(await Promise.allSettled([fetch("".concat(u,"/rmp-gallery/resources/real_world/").concat(h,".json")),fetch("".concat(u,"/rmp-gallery/resources/fantasy/").concat(h,".json"))])).filter(y=>y.status==="fulfilled").find(y=>y.value.status===200))==null?void 0:w.value.json());if(x){if(c){const y={id:h};o&&g&&(y.host=g),O.event(we.IMPORT_WORK_FROM_GALLERY,y)}f(x),t({title:i("header.open.importFromRMPGallery",{id:h}),status:"success",duration:9e3,isClosable:!0})}else t({title:i("header.open.failToImportFromRMPGallery",{id:h}),status:"error",duration:9e3,isClosable:!0})};return m.useEffect(()=>{const g=new URL(window.location.href).searchParams;if(g.size>0){const u=g.keys().next().value,x=u.indexOf("."),w=u.substring(0,x===-1?void 0:x);let y;x!==-1&&(y=u.substring(x+1)),p(w,y)}},[]),m.useEffect(()=>(Hs.onmessage=h=>{const{event:g,data:u}=h.data;g===Qn&&(p(u),a())},()=>Hs.close()),[]),e.jsxs(qs,{isOpen:r,onClose:a,size:"full",sx:$n,children:[e.jsx("iframe",{src:"/rmp-gallery/",loading:"lazy"}),e.jsx(Us,{onClick:a,position:"fixed",top:"5px",right:"15px"})]})}function so(){const{t:s}=W(),r=G(),{preference:{autoParallel:a}}=P(b=>b.app),t=O.isAllowAnalytics(),i=m.useRef(window.graph),n=m.useRef(null),[o,c]=m.useState(!1),[d,l]=m.useState(!1),f=m.useCallback(()=>{r(ae()),r(te()),r(ue(i.current.export()))},[r,ae,te,ue,i]),p=()=>{r(rs()),i.current.clear(),r(Oe(100)),r(Ie({x:0,y:0})),f()},h=b=>{try{t&&O.event(we.IMPORT_RMG_PARAM,{}),Yn(i.current,b,a),f()}catch(S){r(De({status:"error",message:s("header.open.unknownError")})),console.error("OpenActions.handleUploadRMG():: Unknown error occurred while parsing the RMG project",S)}finally{c(!1)}},g=async b=>{const{version:S,...k}=JSON.parse(await Xs(b));r(rs()),i.current.clear(),i.current.import(k.graph),f();const{svgViewBoxZoom:A,svgViewBoxMin:B}=k;typeof A=="number"&&r(Oe(A)),typeof B.x=="number"&&typeof B.y=="number"&&r(Ie(B))},u=async b=>{var k;const S=(k=b.target.files)==null?void 0:k[0];if(console.log("OpenActions.handleUpload():: received file",S),(S==null?void 0:S.type)!=="application/json")r(De({status:"error",message:s("header.open.invalidType")})),console.error("OpenActions.handleUpload():: Invalid file type! Only file in JSON format is accepted.");else try{const A=await to(S);await g(A)}catch(A){r(De({status:"error",message:s("header.open.unknownError")})),console.error("OpenActions.handleUpload():: Unknown error occurred while parsing the uploaded file",A)}b.target.value=""},x=async()=>{await g(await Nt()),r(Ie({x:-10,y:-13}));const b=Math.max(0,Math.min(400,-.132*y+117.772));r(Oe(b)),O.event(we.LOAD_TUTORIAL,{})};m.useEffect(()=>{const b=async S=>{const{type:k,key:A,from:B}=S.data;if(k===It.SAVE_CHANGED&&A===As.PARAM&&B==="rmt"){_t.debug("Received save changed event on key: ".concat(A));const ee=localStorage.getItem(As.PARAM);if(!ee)return;await g(ee)}};return Os.addEventListener("message",b),()=>Os.removeEventListener("message",b)},[]);const w=et(),{height:y}=Qs(w);return e.jsxs(us,{children:[e.jsx(gs,{as:$,size:"sm",variant:"ghost",icon:e.jsx(Ms,{})}),e.jsxs(xs,{children:[e.jsx(re,{icon:e.jsx(Tt,{}),onClick:p,children:s("header.open.new")}),e.jsx("input",{id:"upload_project",ref:n,type:"file",accept:".json",hidden:!0,onChange:u,"data-testid":"file-upload"}),e.jsx(re,{icon:e.jsx(Ms,{}),onClick:()=>{var b;return(b=n==null?void 0:n.current)==null?void 0:b.click()},children:s("header.open.config")}),e.jsx(re,{icon:e.jsx(Rt,{}),onClick:()=>c(!0),children:s("header.open.projectRMG")}),e.jsxs(re,{icon:e.jsx(E,{}),onClick:()=>l(!0),children:[s("header.open.gallery"),e.jsx(be,{ml:"1",colorScheme:"green",children:"New"})]}),e.jsx(re,{icon:e.jsx(Et,{}),onClick:x,children:s("header.open.tutorial")})]}),e.jsx(qn,{isOpen:o,onClose:()=>c(!1),onImport:h}),e.jsx(eo,{isOpen:d,onClose:()=>l(!1)})]})}const to=s=>new Promise(r=>{const a=new FileReader;a.onloadend=()=>r(a.result),a.readAsText(s)}),no=()=>{const[s,r]=m.useState(!1),{t:a}=W(),t=G(),i=m.useRef(window.graph),n=et(),{width:o,height:c}=Qs(n),[d,l]=m.useState([]);m.useEffect(()=>{s&&l(i.current.nodes().filter(p=>p.startsWith("stn")).map(p=>{const h=i.current.getNodeAttributes(p),g=h.type,u=h[g].names.join("/");return{id:p,value:u}}))},[s]);const f=p=>{t(Bt(new Set([p])));const h=Math.max(0,Math.min(400,-.132*c+117.772)),{x:g,y:u}=Pt((o-300)/2,c/2,h,{x:-i.current.getNodeAttribute(p,"x"),y:-i.current.getNodeAttribute(p,"y")});t(Oe(h)),t(Ie({x:-g,y:-u}))};return e.jsxs(Zs,{isOpen:s,onOpen:()=>r(!0),onClose:()=>r(!1),children:[e.jsx(Vs,{children:e.jsx($,{"aria-label":"zoom",variant:"ghost",size:"sm",icon:e.jsx(Ht,{}),onClick:()=>r(!s)})}),e.jsx(Ks,{children:e.jsx(Ys,{children:e.jsx(Wt,{label:a("header.search"),children:e.jsx(Lt,{data:d,displayHandler:p=>e.jsx(be,{children:p.value}),filter:(p,h)=>h.value.toLowerCase().includes(p.toLowerCase())||Object.values(h.value).some(g=>g.toLowerCase().includes(p.toLowerCase())),value:"",onChange:p=>f(p.id)})})})})]})},oo=s=>{const{isOpen:r,onClose:a}=s,t=G(),{theme:i,paletteAppClip:{output:n}}=P(g=>g.runtime),{t:o}=W(),c=m.useRef(window.graph),[d,l]=m.useState(i),[f,p]=m.useState(!1);m.useEffect(()=>{f&&n&&(l(n),p(!1))},[n==null?void 0:n.toString()]);const h=()=>{c.current.filterEdges((g,u,x,w,y,b,S)=>Fs.includes(u.style)&&JSON.stringify(u[u.style].color)===JSON.stringify(d)).forEach(g=>c.current.dropEdge(g)),t(te()),t(ue(c.current.export())),a()};return e.jsxs(Y,{isOpen:r,onClose:a,size:"xl",scrollBehavior:"inside",trapFocus:!1,children:[e.jsx(F,{}),e.jsxs(J,{children:[e.jsx(q,{children:o("header.settings.procedures.removeLines.title")}),e.jsx(X,{}),e.jsxs(Q,{children:[o("header.settings.procedures.removeLines.content"),e.jsx(Dt,{theme:d,onClick:()=>{p(!0),t(Gt(d))}})]}),e.jsxs(ge,{children:[e.jsx(N,{colorScheme:"blue",variant:"outline",mr:"1",onClick:a,children:o("cancel")}),e.jsx(N,{colorScheme:"red",onClick:h,children:o("remove")})]})]})]})},ro=s=>{const{isOpen:r,onClose:a}=s,t=G(),{t:i}=W(),n=m.useRef(window.graph),[o,c]=m.useState(1),d=[{type:"input",label:i("header.settings.procedures.scale.factor"),value:o.toString(),variant:"number",onChange:f=>c(Number(f)),minW:"full"}],l=()=>{n.current.forEachNode((f,p)=>{n.current.updateNodeAttribute(f,"x",h=>(h!=null?h:0)*o),n.current.updateNodeAttribute(f,"y",h=>(h!=null?h:0)*o)}),t(ae()),t(te()),t(ue(n.current.export())),a()};return e.jsxs(Y,{isOpen:r,onClose:a,size:"xl",scrollBehavior:"inside",children:[e.jsx(F,{}),e.jsxs(J,{children:[e.jsx(q,{children:i("header.settings.procedures.scale.title")}),e.jsx(X,{}),e.jsxs(Q,{children:[i("header.settings.procedures.scale.content"),e.jsx(ke,{fields:d})]}),e.jsxs(ge,{children:[e.jsx(N,{colorScheme:"blue",variant:"outline",mr:"1",onClick:a,children:i("cancel")}),e.jsx(N,{colorScheme:"red",onClick:l,children:i("apply")})]})]})]})},io=s=>{const{isOpen:r,onClose:a}=s,t=G(),{t:i}=W(),n=m.useRef(window.graph),[o,c]=m.useState(0),[d,l]=m.useState(0),f=[{type:"input",label:i("header.settings.procedures.translate.x"),value:o.toString(),variant:"number",onChange:h=>c(Number(h)),minW:"full"},{type:"input",label:i("header.settings.procedures.translate.y"),value:d.toString(),variant:"number",onChange:h=>l(Number(h)),minW:"full"}],p=()=>{n.current.forEachNode((h,g)=>{n.current.updateNodeAttribute(h,"x",u=>(u!=null?u:0)+o),n.current.updateNodeAttribute(h,"y",u=>(u!=null?u:0)+d)}),t(ae()),t(te()),t(ue(n.current.export())),a()};return e.jsxs(Y,{isOpen:r,onClose:a,size:"xl",scrollBehavior:"inside",children:[e.jsx(F,{}),e.jsxs(J,{children:[e.jsx(q,{children:i("header.settings.procedures.translate.title")}),e.jsx(X,{}),e.jsxs(Q,{children:[i("header.settings.procedures.translate.content"),e.jsx(ke,{fields:f})]}),e.jsxs(ge,{children:[e.jsx(N,{colorScheme:"blue",variant:"outline",mr:"1",onClick:a,children:i("cancel")}),e.jsx(N,{colorScheme:"red",onClick:p,children:i("apply")})]})]})]})},ao=s=>{const{isOpen:r,onClose:a}=s,t=G(),{preference:{unlockSimplePathAttempts:i}}=P(d=>d.app),{activeSubscriptions:n}=P(d=>d.account),{t:o}=W(),c=()=>{t(Ut(-1))};return e.jsxs(Y,{isOpen:r,onClose:a,size:"5xl",scrollBehavior:"inside",children:[e.jsx(F,{}),e.jsxs(J,{children:[e.jsx(q,{children:o("header.settings.procedures.unlockSimplePath.title")}),e.jsx(X,{}),e.jsxs(Q,{children:[e.jsx(j,{mb:"2",children:o("header.settings.procedures.unlockSimplePath.content1")}),e.jsx(j,{mb:"2",children:o("header.settings.procedures.unlockSimplePath.content2")}),e.jsx(j,{mb:"2",children:o("header.settings.procedures.unlockSimplePath.content3")})]}),e.jsx(ge,{children:e.jsx(Ee,{label:o("header.settings.pro"),isOpen:!n.RMP_CLOUD&&i>=0,children:e.jsx(N,{onClick:c,isDisabled:!n.RMP_CLOUD||i<0,children:i>=0?o("header.settings.procedures.unlockSimplePath.check"):o("header.settings.procedures.unlockSimplePath.unlocked")})})})]})]})},lo=s=>{const{isOpen:r,onClose:a}=s,t=G(),i=Gs(),{t:n}=W(),o=m.useRef(window.graph),[c,d]=m.useState(!1),l=async()=>{d(!0);const f=JSON.stringify(o.current.export());try{const p=await po(f);o.current.clear(),o.current.import(p),t(ae()),t(te()),t(ue(o.current.export())),i({title:n("header.settings.procedures.updateColor.success"),status:"success",duration:9e3,isClosable:!0})}catch(p){console.error("[rmp] Error in updating all colors: ".concat(p)),i({title:n("header.settings.procedures.updateColor.error",{e:p}),status:"error",duration:9e3,isClosable:!0})}d(!1),a()};return e.jsxs(Y,{isOpen:r,onClose:a,size:"xl",scrollBehavior:"inside",children:[e.jsx(F,{}),e.jsxs(J,{children:[e.jsx(q,{children:n("header.settings.procedures.updateColor.title")}),e.jsx(X,{}),e.jsx(Q,{children:e.jsx(j,{children:n("header.settings.procedures.updateColor.content")})}),e.jsxs(ge,{children:[e.jsx(N,{colorScheme:"blue",variant:"outline",mr:"1",onClick:a,children:n("cancel")}),e.jsx(N,{colorScheme:"red",onClick:l,isLoading:c,children:n("apply")})]})]})]})},Ws=s=>s.length>=4&&s.every(r=>typeof r=="string")&&!!s[2].match(/^#[0-9a-fA-F]{6}$/)&&Object.values(ms).includes(s[3]),co=s=>{const r=[],a=(t,i)=>{if(Array.isArray(t)&&Ws(t)){r.push({path:i||"",value:t});return}for(const n in t){const o=t[n],c=i?"".concat(i,".").concat(n):n;Array.isArray(o)?Ws(o)?r.push({path:c,value:o}):o.forEach((d,l)=>a(d,"".concat(c,".").concat(l))):o&&typeof o=="object"&&a(o,c)}};return a(s),r},ho=(s,r,a)=>{const t=r.split(".");let i=s;for(let n=0;n<t.length-1;n++)i=i[t[n]];i[t[t.length-1]]=a},po=async s=>{const r=JSON.parse(s),a=new Date().getTime(),t=co(r);console.log("[rmp] Found all themes pending for update",t);const i=1e4;let n,o=!1;const c=new Promise((d,l)=>{n=setTimeout(()=>{o=!0,l("Executing time exceeds ".concat(i,"ms"))},i),(async()=>{for(const{path:f,value:p}of t){if(o)throw new Error("Update aborted");const[h,g,u,x,...w]=p,y=await Zt([h,g,u,x]);ho(r,f,[...y,...w])}})().then(d).catch(l)});try{return await c,console.log("[rmp] Themes update completed, elapsed time ".concat((new Date().getTime()-a)/1e3," sec")),r}finally{clearTimeout(n)}},Ls=1,uo=()=>{const{state:s}=P(d=>d.account),{t:r}=W(),[a,t]=m.useState(!1),[i,n]=m.useState(Ls);m.useEffect(()=>{let d;return a&&i>0?d=window.setTimeout(()=>{n(i-1)},1e3):i===0&&t(!1),()=>clearTimeout(d)},[a,i]);const o=()=>{t(!0),n(Ls),Kt()},c={"logged-out":r("header.settings.subscription.logged-out"),free:r("header.settings.subscription.free"),subscriber:r("header.settings.subscription.subscriber"),expired:r("header.settings.subscription.expired")};return e.jsxs(R,{width:"100%",mb:"3",children:[e.jsx(j,{as:"b",fontSize:"xl",children:r("header.settings.subscription.title")}),e.jsx(R,{mt:"3",children:e.jsxs(R,{display:"flex",mb:"1",children:[e.jsx(j,{flex:"1",children:c[s]}),e.jsx($,{"aria-label":"refresh",variant:"ghost",size:"sm",icon:e.jsx(Vt,{}),isDisabled:a,onClick:()=>o()})]})})]})},me={width:"100%",justifyContent:"space-between"},oe={fontFamily:"-apple-system"},go=s=>{const{isOpen:r,onClose:a}=s,{activeSubscriptions:t}=P(L=>L.account),{telemetry:{project:i},preference:{autoParallel:n}}=P(L=>L.app),{keepLastPath:o,parallelLinesCount:c}=P(L=>L.runtime),d=G(),{t:l}=W(),f=Ds("primary.500","primary.300"),[p,h]=m.useState(!1),[g,u]=m.useState(!1),[x,w]=m.useState(!1),[y,b]=m.useState(!1),[S,k]=m.useState(!1),[A,B]=m.useState(!1),[ee,ne]=m.useState(!1),le=O.isAllowAnalytics(),ce=L=>{d(sn(L))},Me=t.RMP_CLOUD?Yt:Ft,We=c>=Me;return e.jsxs(Y,{isOpen:r,onClose:a,size:"xl",scrollBehavior:"inside",trapFocus:!1,children:[e.jsx(F,{}),e.jsxs(J,{children:[e.jsx(q,{children:l("header.settings.title")}),e.jsx(X,{}),e.jsx(Q,{children:e.jsxs(ve,{divider:e.jsx(ut,{borderColor:"gray.200"}),children:[e.jsx(uo,{}),e.jsxs(R,{width:"100%",mb:"3",children:[e.jsx(j,{as:"b",fontSize:"xl",children:l("header.settings.preference.title")}),e.jsxs(R,{mt:"3",children:[e.jsxs(R,{display:"flex",mb:"1",children:[e.jsx(j,{flex:"1",children:l("header.settings.preference.keepLastPath")}),e.jsx(Be,{isChecked:o,onChange:({target:{checked:L}})=>d(Jt(L))})]}),e.jsxs(R,{display:"flex",mb:"1",children:[e.jsx(j,{children:l("header.settings.preference.autoParallel")}),e.jsx(be,{ml:"1",colorScheme:"green",children:"New"}),e.jsx(Ee,{label:l("header.settings.proWithTrial"),children:e.jsx(be,{ml:"1",color:"gray.50",background:"radial-gradient(circle, #3f5efb, #fc466b)",mr:"auto",children:"PRO"})}),e.jsx(Be,{isDisabled:We,isChecked:n,onChange:({target:{checked:L}})=>d(qt(L))})]})]})]}),e.jsxs(R,{width:"100%",mb:"3",children:[e.jsx(j,{as:"b",fontSize:"xl",children:l("header.settings.procedures.title")}),e.jsxs(R,{mt:"3",children:[e.jsx(N,{sx:me,rightIcon:e.jsx(xe,{}),onClick:()=>h(!0),children:l("header.settings.procedures.translate.title")}),e.jsx(io,{isOpen:p,onClose:()=>h(!1)}),e.jsx(N,{sx:me,rightIcon:e.jsx(xe,{}),onClick:()=>u(!0),children:l("header.settings.procedures.scale.title")}),e.jsx(ro,{isOpen:g,onClose:()=>u(!1)}),e.jsxs(N,{sx:me,rightIcon:e.jsx(xe,{}),onClick:()=>w(!0),children:[l("header.settings.procedures.changeType.title"),e.jsx(Ee,{label:l("header.settings.pro"),children:e.jsx(be,{ml:"1",color:"gray.50",background:"radial-gradient(circle, #3f5efb, #fc466b)",mr:"auto",children:"PRO"})})]}),e.jsx(bn,{isOpen:x,onClose:()=>w(!1),isSelect:!1}),e.jsx(N,{sx:me,rightIcon:e.jsx(xe,{}),onClick:()=>b(!0),children:l("header.settings.procedures.removeLines.title")}),e.jsx(oo,{isOpen:y,onClose:()=>b(!1)}),e.jsx(N,{sx:me,rightIcon:e.jsx(xe,{}),onClick:()=>k(!0),children:l("header.settings.procedures.updateColor.title")}),e.jsx(lo,{isOpen:S,onClose:()=>k(!1)}),e.jsxs(N,{sx:me,rightIcon:e.jsx(xe,{}),onClick:()=>B(!0),children:[l("header.settings.procedures.unlockSimplePath.title"),e.jsx(Ee,{label:l("header.settings.pro"),children:e.jsx(be,{ml:"1",color:"gray.50",background:"radial-gradient(circle, #3f5efb, #fc466b)",mr:"auto",children:"PRO"})})]}),e.jsx(ao,{isOpen:A,onClose:()=>B(!1)}),e.jsx(N,{sx:me,rightIcon:e.jsx(xe,{}),onClick:()=>ne(!0),children:l("header.settings.procedures.masterManager.title")}),e.jsx(jn,{isOpen:ee,onClose:()=>ne(!1)})]})]}),e.jsxs(R,{width:"100%",mb:"3",children:[e.jsx(j,{as:"b",fontSize:"xl",children:l("header.settings.shortcuts.title")}),e.jsx(R,{mt:"3",children:e.jsxs(gt,{children:[e.jsx(xt,{children:e.jsxs(D,{children:[e.jsx(zs,{children:l("header.settings.shortcuts.keys")}),e.jsx(zs,{children:l("header.settings.shortcuts.description")})]})}),e.jsxs(mt,{children:[e.jsxs(D,{children:[e.jsx(M,{children:e.jsx(C,{children:"f"})}),e.jsx(M,{children:l("header.settings.shortcuts.f")})]}),e.jsxs(D,{children:[e.jsx(M,{children:e.jsx(C,{children:"s"})}),e.jsx(M,{children:l("header.settings.shortcuts.s")})]}),e.jsxs(D,{children:[e.jsx(M,{children:e.jsxs(R,{display:"flex",flexDirection:"row",children:[e.jsx(Xt,{}),e.jsx(Qt,{}),e.jsx($t,{}),e.jsx(en,{})]})}),e.jsx(M,{children:l("header.settings.shortcuts.arrows")})]}),e.jsxs(D,{children:[e.jsx(M,{children:e.jsxs(R,{display:"flex",flexDirection:"row",children:[e.jsx(C,{children:"i"}),e.jsx(C,{children:"j"}),e.jsx(C,{children:"k"}),e.jsx(C,{children:"l"})]})}),e.jsx(M,{children:l("header.settings.shortcuts.ijkl")})]}),e.jsxs(D,{children:[e.jsx(M,{children:de?e.jsx(C,{sx:oe,children:"⇧"}):e.jsx(C,{children:"shift"})}),e.jsx(M,{children:l("header.settings.shortcuts.shift")})]}),e.jsxs(D,{children:[e.jsx(M,{children:de?e.jsx(C,{sx:oe,children:"⌥"}):e.jsx(C,{children:"alt"})}),e.jsx(M,{children:l("header.settings.shortcuts.alt")})]}),e.jsxs(D,{children:[e.jsx(M,{children:de?e.jsx(C,{sx:oe,children:"⌫"}):e.jsx(C,{children:"delete"})}),e.jsx(M,{children:l("header.settings.shortcuts.delete")})]}),e.jsxs(D,{children:[e.jsxs(M,{children:[de?e.jsx(C,{sx:oe,children:"⌘"}):e.jsx(C,{children:"ctrl"})," + ",e.jsx(C,{children:"x"})]}),e.jsx(M,{children:l("header.settings.shortcuts.cut")})]}),e.jsxs(D,{children:[e.jsxs(M,{children:[de?e.jsx(C,{sx:oe,children:"⌘"}):e.jsx(C,{children:"ctrl"})," + ",e.jsx(C,{children:"c"})]}),e.jsx(M,{children:l("header.settings.shortcuts.copy")})]}),e.jsxs(D,{children:[e.jsxs(M,{children:[de?e.jsx(C,{sx:oe,children:"⌘"}):e.jsx(C,{children:"ctrl"})," + ",e.jsx(C,{children:"v"})]}),e.jsx(M,{children:l("header.settings.shortcuts.paste")})]}),e.jsxs(D,{children:[e.jsxs(M,{children:[de?e.jsx(C,{sx:oe,children:"⌘"}):e.jsx(C,{children:"ctrl"})," + ",e.jsx(C,{children:"z"})]}),e.jsx(M,{children:l("header.settings.shortcuts.undo")})]}),e.jsxs(D,{children:[e.jsx(M,{children:de?e.jsxs(e.Fragment,{children:[e.jsx(C,{sx:oe,children:"⇧"})," + ",e.jsx(C,{sx:oe,children:"⌘"})," + ",e.jsx(C,{children:"z"})]}):e.jsxs(e.Fragment,{children:[e.jsx(C,{children:"ctrl"})," + ",e.jsx(C,{children:"y"})]})}),e.jsx(M,{children:l("header.settings.shortcuts.redo")})]})]})]})})]}),e.jsxs(R,{width:"100%",mb:"3",children:[e.jsx(j,{as:"b",fontSize:"xl",children:l("header.settings.telemetry.title")}),e.jsxs(R,{mt:"3",children:[e.jsx(j,{fontSize:"sm",lineHeight:"100%",color:"gray.600",children:l("header.settings.telemetry.info")}),e.jsxs(R,{mt:"3",mb:"1",children:[e.jsxs(R,{display:"flex",mb:"1",children:[e.jsx(j,{flex:"1",children:l("header.settings.telemetry.essential")}),e.jsx(Ee,{label:l("header.settings.telemetry.essentialTooltip"),children:e.jsx(Be,{isChecked:le,isDisabled:!0})})]}),e.jsx(j,{fontSize:"sm",lineHeight:"100%",color:"gray.600",children:l("header.settings.telemetry.essentialInfo")}),e.jsxs(T,{color:f,fontSize:"sm",lineHeight:"100%",href:"https://support.google.com/analytics/answer/11593727",isExternal:!0,children:[l("header.settings.telemetry.essentialLink")," ",e.jsx(I,{as:E})]})]}),e.jsxs(R,{mt:"1",mb:"1",children:[e.jsxs(R,{display:"flex",children:[e.jsx(j,{flex:"1",children:l("header.settings.telemetry.additional")}),e.jsx(Be,{isChecked:i,onChange:({target:{checked:L}})=>ce(L)})]}),e.jsx(j,{fontSize:"sm",lineHeight:"100%",color:"gray.600",children:l("header.settings.telemetry.additionalInfo")})]})]})]})]})})]})]})},xo=()=>{const[s,r]=m.useState(!1),{svgViewBoxZoom:a}=P(n=>n.param),t=G(),i=[{type:"slider",label:"",value:400-a,min:10,max:390,step:1,onChange:n=>t(Oe(400-n)),leftIcon:e.jsx(tn,{}),rightIcon:e.jsx(Ts,{}),minW:160}];return e.jsxs(Zs,{isOpen:s,onOpen:()=>r(!0),onClose:()=>r(!1),children:[e.jsx(Vs,{children:e.jsx($,{"aria-label":"zoom",variant:"ghost",size:"sm",icon:e.jsx(Ts,{}),onClick:()=>r(!s)})}),e.jsx(Ks,{children:e.jsx(Ys,{children:e.jsx(ke,{fields:i,noLabel:!0})})})]})};function mo(){const{t:s}=W(),r=G(),{past:a,future:t}=P(x=>x.param),{isDonationModalOpen:i}=P(x=>x.runtime),n=O.isAllowAnalytics(),[o,c]=m.useState(!1),[d,l]=m.useState(!1),f=Is(O.getEnv),p=Is(O.getAppVersion);m.useEffect(()=>{n&&f!==Xe.DEV&&O.event(we.APP_LOAD,{isStandaloneWindow:O.isStandaloneWindow()})},[f]);const h=x=>{O.getI18nInstance().changeLanguage(x)},g=()=>{r(hn()),r(ae()),r(te())},u=()=>{r(pn()),r(ae()),r(te())};return e.jsxs(nn,{children:[e.jsx(je,{as:"h4",size:"md",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:s("header.about.rmp")}),e.jsx(on,{environment:f,version:p,popoverHeader:f===Xe.PRD?void 0:e.jsxs(Ns,{i18nKey:"header.popoverHeader",environment:f,children:["You're on ",{environment:f}," environment!"]}),popoverBody:f===Xe.PRD?void 0:e.jsx(Ns,{i18nKey:"header.popoverBody",children:"This is a testing environment where we test the latest beta RMP."})}),e.jsxs(ft,{ml:"auto",children:[e.jsx(se,{children:e.jsx(no,{})}),e.jsx(se,{children:e.jsx($,{size:"sm",variant:"ghost","aria-label":"Undo",icon:e.jsx(rn,{}),isDisabled:a.length===0,onClick:g})}),e.jsx(se,{children:e.jsx($,{size:"sm",variant:"ghost","aria-label":"Redo",icon:e.jsx(an,{}),isDisabled:t.length===0,onClick:u})}),e.jsx(se,{children:e.jsx(xo,{})}),e.jsx(se,{children:e.jsx(so,{})}),e.jsx(se,{children:e.jsx(Kn,{})}),O.isStandaloneWindow()&&e.jsx(se,{children:e.jsxs(us,{children:[e.jsx(gs,{as:$,icon:e.jsx(ln,{}),variant:"ghost",size:"sm"}),e.jsx(xs,{children:["en","zh-Hans","zh-Hant","ja","ko"].map(x=>e.jsx(re,{onClick:()=>h(x),children:wn[x][x]},x))})]})}),e.jsx(se,{children:e.jsx($,{size:"sm",variant:"ghost","aria-label":"Donation",color:"red",icon:e.jsx($s,{}),onClick:()=>r(Rs(!0))})}),e.jsx(se,{children:e.jsx($,{size:"sm",variant:"ghost","aria-label":"Settings",icon:e.jsx(cn,{}),onClick:()=>c(!0)})}),e.jsx(se,{children:e.jsx($,{size:"sm",variant:"ghost","aria-label":"Help",icon:e.jsx(dn,{}),onClick:()=>l(!0)})})]}),e.jsx(Mn,{isOpen:i,onClose:()=>r(Rs(!1))}),e.jsx(go,{isOpen:o,onClose:()=>c(!1)}),e.jsx(Cn,{isOpen:d,onClose:()=>l(!1)})]})}function fo(){const s=G(),r=P(t=>t.runtime.globalAlerts),a=t=>{O.isStandaloneWindow()?window.open("/".concat(t),"_blank"):O.openApp({appId:t})};return e.jsx(e.Fragment,{children:Object.entries(r).map(([t,{message:i,url:n,linkedApp:o}])=>e.jsxs(jt,{status:t,variant:"solid",size:"xs",pl:3,pr:1,py:0,zIndex:"1",children:[e.jsx(bt,{}),o?e.jsx(T,{onClick:()=>a(o),children:i}):n?e.jsx(T,{href:n,target:"_blank",children:i}):i,e.jsx(Us,{ml:"auto",onClick:()=>s(un(t))})]},t))})}function zo(){return e.jsxs(e.Fragment,{children:[e.jsx(mo,{}),e.jsx(fo,{})]})}export{zo as default};
